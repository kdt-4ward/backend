[2025-07-14 18:00:48][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:00:48][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:00:48][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [generated in 0.00024s] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {}
[2025-07-14 18:00:48][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00022s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 0, 49, 929073), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 0, 49, 929077), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 0, 49, 962809)}
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:00:49][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00004s (insertmanyvalues) 1/1 (ordered)] {'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 0, 48, 679245), 'user_id__0': '1', 'question_id__0': 1, 'choice_id__0': 2, 'custom_input__0': None, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 0, 48, 679277), 'user_id__1': '1', 'question_id__1': 2, 'choice_id__1': 8, 'custom_input__1': None, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 0, 48, 679293), 'user_id__2': '1', 'question_id__2': 3, 'choice_id__2': 13, 'custom_input__2': None, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 0, 48, 679308), 'user_id__3': '1', 'question_id__3': 4, 'choice_id__3': 21, 'custom_input__3': None, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 0, 48, 679325), 'user_id__4': '1', 'question_id__4': 5, 'choice_id__4': 26, 'custom_input__4': None, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 0, 48, 679340), 'user_id__5': '2', 'question_id__5': 1, 'choice_id__5': 1, 'custom_input__5': None, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 0, 48, 679353), 'user_id__6': '2', 'question_id__6': 2, 'choice_id__6': 9, 'custom_input__6': None, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 0, 48, 679367), 'user_id__7': '2', 'question_id__7': 3, 'choice_id__7': 16, 'custom_input__7': None, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 0, 48, 679381), 'user_id__8': '2', 'question_id__8': 4, 'choice_id__8': 20, 'custom_input__8': None, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 0, 48, 679397), 'user_id__9': '2', 'question_id__9': 5, 'choice_id__9': 25, 'custom_input__9': None}
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'emotion__0': '고마움', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__1': '1', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__1': '기대감', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__2': '1', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'emotion__2': '미안함', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__3': '1', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'emotion__3': '죄책감', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__4': '1', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__4': '사랑', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__5': '1', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__5': '다정함', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__6': '1', 'memo__6': '너와의 대화가 편하고 좋았어.', 'emotion__6': '친밀감', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__7': '1', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'emotion__7': '억울함', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__8': '1', 'memo__8': '너의 반응이 조금 서운했어.', 'emotion__8': '서운함', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__9': '1', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'emotion__9': '행복', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__10': '1', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'emotion__10': '감사', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__11': '1', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'emotion__11': '신뢰', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__12': '1', 'memo__12': '너에 대한 애정이 넘쳤어.' ... 8 parameters truncated ... 'emotion__14': '바쁨', 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__15': '2', 'memo__15': '너의 반응이 조금 서운했어.', 'emotion__15': '서운함', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__16': '2', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'emotion__16': '실망감', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__17': '2', 'memo__17': '네 입장에서 생각해보게 됐어.', 'emotion__17': '이해', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__18': '2', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__18': '다정함', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__19': '2', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'emotion__19': '호감', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__20': '2', 'memo__20': '너와 있으면 참 편안해.', 'emotion__20': '편안함', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__21': '2', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__21': '기대감', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__22': '2', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'emotion__22': '불만', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__23': '2', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'emotion__23': '기쁨', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__24': '2', 'memo__24': '사소한 행동에도 감동했어.', 'emotion__24': '감동', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__25': '2', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__25': '사랑', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__26': '2', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'emotion__26': '안정감', 'date__26': datetime.datetime(2025, 7, 7, 0, 0)}
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s (insertmanyvalues) 1/1 (ordered)] {'couple_id__0': '1', 'user_id__0': '1', 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'deleted_at__0': None, 'embed_index__0': None, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'has_image__0': 0, 'is_delivered__0': 1, 'image_url__0': None, 'couple_id__1': '1', 'user_id__1': '2', 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'deleted_at__1': None, 'embed_index__1': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'has_image__1': 0, 'is_delivered__1': 1, 'image_url__1': None, 'couple_id__2': '1', 'user_id__2': '1', 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'deleted_at__2': None, 'embed_index__2': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'has_image__2': 0, 'is_delivered__2': 1, 'image_url__2': None, 'couple_id__3': '1', 'user_id__3': '2', 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'deleted_at__3': None, 'embed_index__3': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'has_image__3': 0, 'is_delivered__3': 1, 'image_url__3': None, 'couple_id__4': '1', 'user_id__4': '2', 'content__4': '어제 약속했는데 통화 못했네 😕', 'deleted_at__4': None, 'embed_index__4': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'has_image__4': 0, 'is_delivered__4': 1, 'image_url__4': None, 'couple_id__5': '1', 'user_id__5': '1', 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'deleted_at__5': None, 'embed_index__5': None ... 170 parameters truncated ... 'embed_index__24': None, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'has_image__24': 0, 'is_delivered__24': 1, 'image_url__24': None, 'couple_id__25': '1', 'user_id__25': '2', 'content__25': '나도야~ 🥰', 'deleted_at__25': None, 'embed_index__25': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'has_image__25': 0, 'is_delivered__25': 1, 'image_url__25': None, 'couple_id__26': '1', 'user_id__26': '1', 'content__26': '일주일 진짜 빠르다', 'deleted_at__26': None, 'embed_index__26': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'has_image__26': 0, 'is_delivered__26': 1, 'image_url__26': None, 'couple_id__27': '1', 'user_id__27': '2', 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'deleted_at__27': None, 'embed_index__27': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'has_image__27': 0, 'is_delivered__27': 1, 'image_url__27': None, 'couple_id__28': '1', 'user_id__28': '1', 'content__28': '너 있어서 든든했어', 'deleted_at__28': None, 'embed_index__28': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'has_image__28': 0, 'is_delivered__28': 1, 'image_url__28': None, 'couple_id__29': '1', 'user_id__29': '2', 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'deleted_at__29': None, 'embed_index__29': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'has_image__29': 0, 'is_delivered__29': 1, 'image_url__29': None}
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {}
[2025-07-14 18:00:50][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1'}
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:00:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:00:52][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] [generated in 0.00023s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] [generated in 0.00021s] {'user_id': '1', 'summary': '지민 values open and effective communication in their relationships, preferring to address issues with a calm approach before discussing them. They exp ... (143 characters truncated) ... ing a consistent and engaging connection. They prioritize building a deep and meaningful relationship, aiming for a profound bond with their partner.', 'created_at': datetime.datetime(2025, 7, 14, 9, 0, 52, 128365), 'updated_at': datetime.datetime(2025, 7, 14, 9, 0, 52, 128371)}
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:52][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] [cached since 1.885s ago] {'user_id_1': '2'}
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:00:52][INFO][sqlalchemy.engine.Engine] [cached since 1.883s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:00:54][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:00:54][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:00:54][INFO][sqlalchemy.engine.Engine] [cached since 2.561s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:00:54][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:00:54][INFO][sqlalchemy.engine.Engine] [cached since 2.559s ago] {'user_id': '2', 'summary': '수아 values trust in her relationships and prefers to maintain a balanced sense of independence. When conflicts arise, she tends to adopt a wait-it-out ... (250 characters truncated) ... ikely to ensure that interactions are genuine and engaging. Overall, 수아 seeks a relationship that respects both personal space and mutual connection.', 'created_at': datetime.datetime(2025, 7, 14, 9, 0, 54, 687290), 'updated_at': datetime.datetime(2025, 7, 14, 9, 0, 54, 687292)}
[2025-07-14 18:00:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:00:54][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:00:54][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:00:54][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:08:48][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:08:48][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:08:48][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:08:48][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [generated in 0.00026s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [no key 0.00020s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:08:49][INFO][sqlalchemy.engine.Engine] [no key 0.00022s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00018s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00034s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00023s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00019s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00022s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00024s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 8, 50, 306064), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 8, 50, 306068), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 8, 50, 341792)}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 8, 49, 50566), 'custom_input__0': None, 'question_id__0': 1, 'choice_id__0': 2, 'user_id__0': '1', 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 8, 49, 50588), 'custom_input__1': None, 'question_id__1': 2, 'choice_id__1': 8, 'user_id__1': '1', 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 8, 49, 50599), 'custom_input__2': None, 'question_id__2': 3, 'choice_id__2': 13, 'user_id__2': '1', 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 8, 49, 50611), 'custom_input__3': None, 'question_id__3': 4, 'choice_id__3': 21, 'user_id__3': '1', 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 8, 49, 50623), 'custom_input__4': None, 'question_id__4': 5, 'choice_id__4': 26, 'user_id__4': '1', 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 8, 49, 50631), 'custom_input__5': None, 'question_id__5': 1, 'choice_id__5': 1, 'user_id__5': '2', 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 8, 49, 50640), 'custom_input__6': None, 'question_id__6': 2, 'choice_id__6': 9, 'user_id__6': '2', 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 8, 49, 50650), 'custom_input__7': None, 'question_id__7': 3, 'choice_id__7': 16, 'user_id__7': '2', 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 8, 49, 50660), 'custom_input__8': None, 'question_id__8': 4, 'choice_id__8': 20, 'user_id__8': '2', 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 8, 49, 50672), 'custom_input__9': None, 'question_id__9': 5, 'choice_id__9': 25, 'user_id__9': '2'}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s (insertmanyvalues) 1/1 (ordered)] {'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__12': '애정', 'memo__12': '너에 대한 애정이 넘쳤어.' ... 8 parameters truncated ... 'user_id__14': '2', 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0)}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s (insertmanyvalues) 1/1 (ordered)] {'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'is_delivered__0': 1, 'has_image__0': 0, 'couple_id__0': '1', 'image_url__0': None, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'embed_index__0': None, 'deleted_at__0': None, 'user_id__0': '1', 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'is_delivered__1': 1, 'has_image__1': 0, 'couple_id__1': '1', 'image_url__1': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'embed_index__1': None, 'deleted_at__1': None, 'user_id__1': '2', 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'is_delivered__2': 1, 'has_image__2': 0, 'couple_id__2': '1', 'image_url__2': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'embed_index__2': None, 'deleted_at__2': None, 'user_id__2': '1', 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'is_delivered__3': 1, 'has_image__3': 0, 'couple_id__3': '1', 'image_url__3': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'embed_index__3': None, 'deleted_at__3': None, 'user_id__3': '2', 'content__4': '어제 약속했는데 통화 못했네 😕', 'is_delivered__4': 1, 'has_image__4': 0, 'couple_id__4': '1', 'image_url__4': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'embed_index__4': None, 'deleted_at__4': None, 'user_id__4': '2', 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'is_delivered__5': 1, 'has_image__5': 0, 'couple_id__5': '1', 'image_url__5': None ... 170 parameters truncated ... 'image_url__24': None, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'embed_index__24': None, 'deleted_at__24': None, 'user_id__24': '1', 'content__25': '나도야~ 🥰', 'is_delivered__25': 1, 'has_image__25': 0, 'couple_id__25': '1', 'image_url__25': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'embed_index__25': None, 'deleted_at__25': None, 'user_id__25': '2', 'content__26': '일주일 진짜 빠르다', 'is_delivered__26': 1, 'has_image__26': 0, 'couple_id__26': '1', 'image_url__26': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'embed_index__26': None, 'deleted_at__26': None, 'user_id__26': '1', 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'is_delivered__27': 1, 'has_image__27': 0, 'couple_id__27': '1', 'image_url__27': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'embed_index__27': None, 'deleted_at__27': None, 'user_id__27': '2', 'content__28': '너 있어서 든든했어', 'is_delivered__28': 1, 'has_image__28': 0, 'couple_id__28': '1', 'image_url__28': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'embed_index__28': None, 'deleted_at__28': None, 'user_id__28': '1', 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'is_delivered__29': 1, 'has_image__29': 0, 'couple_id__29': '1', 'image_url__29': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'embed_index__29': None, 'deleted_at__29': None, 'user_id__29': '2'}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {}
[2025-07-14 18:08:50][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1'}
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:08:50][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:08:53][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'user_id': '1', 'summary': '지민 values communication as a cornerstone of their relationships, emphasizing the importance of expressing thoughts and feelings openly. When conflict ... (263 characters truncated) ... nteraction helps maintain closeness. Ultimately, they seek deep connections, aiming for relationships that are emotionally fulfilling and meaningful.', 'created_at': datetime.datetime(2025, 7, 14, 9, 8, 53, 521379), 'updated_at': datetime.datetime(2025, 7, 14, 9, 8, 53, 521382)}
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:53][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] [cached since 2.976s ago] {'user_id_1': '2'}
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:08:53][INFO][sqlalchemy.engine.Engine] [cached since 2.977s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:08:57][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:08:57][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:08:57][INFO][sqlalchemy.engine.Engine] [cached since 3.592s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:08:57][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:08:57][INFO][sqlalchemy.engine.Engine] [cached since 3.596s ago] {'user_id': '2', 'summary': '수아 values trust as a fundamental aspect of her relationships, prioritizing honesty and reliability. She tends to handle conflicts by giving situation ... (290 characters truncated) ... e seeks a relationship characterized by balanced independence, where both partners maintain their individuality while being supportive of each other.', 'created_at': datetime.datetime(2025, 7, 14, 9, 8, 57, 117176), 'updated_at': datetime.datetime(2025, 7, 14, 9, 8, 57, 117180)}
[2025-07-14 18:08:57][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:57][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:08:57][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:08:57][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:08:57][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:08:57][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:08:57][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {}
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:08:58][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00023s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 8, 59, 739817), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 8, 59, 739821), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 8, 59, 774835)}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [generated in 0.00022s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 8, 58, 502910), 'custom_input__0': None, 'user_id__0': '1', 'choice_id__0': 2, 'question_id__0': 1, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 8, 58, 502926), 'custom_input__1': None, 'user_id__1': '1', 'choice_id__1': 8, 'question_id__1': 2, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 8, 58, 502934), 'custom_input__2': None, 'user_id__2': '1', 'choice_id__2': 13, 'question_id__2': 3, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 8, 58, 502942), 'custom_input__3': None, 'user_id__3': '1', 'choice_id__3': 21, 'question_id__3': 4, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 8, 58, 502950), 'custom_input__4': None, 'user_id__4': '1', 'choice_id__4': 26, 'question_id__4': 5, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 8, 58, 502958), 'custom_input__5': None, 'user_id__5': '2', 'choice_id__5': 1, 'question_id__5': 1, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 8, 58, 502966), 'custom_input__6': None, 'user_id__6': '2', 'choice_id__6': 9, 'question_id__6': 2, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 8, 58, 502973), 'custom_input__7': None, 'user_id__7': '2', 'choice_id__7': 16, 'question_id__7': 3, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 8, 58, 502989), 'custom_input__8': None, 'user_id__8': '2', 'choice_id__8': 20, 'question_id__8': 4, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 8, 58, 502997), 'custom_input__9': None, 'user_id__9': '2', 'choice_id__9': 25, 'question_id__9': 5}
[2025-07-14 18:08:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__12': '1', 'date__12': datetime.datetime(2025, 7, 7, 0, 0) ... 8 parameters truncated ... 'emotion__14': '바쁨', 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s (insertmanyvalues) 1/1 (ordered)] {'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'deleted_at__0': None, 'image_url__0': None, 'couple_id__0': '1', 'has_image__0': 0, 'is_delivered__0': 1, 'user_id__0': '1', 'embed_index__0': None, 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'deleted_at__1': None, 'image_url__1': None, 'couple_id__1': '1', 'has_image__1': 0, 'is_delivered__1': 1, 'user_id__1': '2', 'embed_index__1': None, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'deleted_at__2': None, 'image_url__2': None, 'couple_id__2': '1', 'has_image__2': 0, 'is_delivered__2': 1, 'user_id__2': '1', 'embed_index__2': None, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'deleted_at__3': None, 'image_url__3': None, 'couple_id__3': '1', 'has_image__3': 0, 'is_delivered__3': 1, 'user_id__3': '2', 'embed_index__3': None, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'deleted_at__4': None, 'image_url__4': None, 'couple_id__4': '1', 'has_image__4': 0, 'is_delivered__4': 1, 'user_id__4': '2', 'embed_index__4': None, 'content__4': '어제 약속했는데 통화 못했네 😕', 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40), 'deleted_at__5': None, 'image_url__5': None, 'couple_id__5': '1', 'has_image__5': 0 ... 170 parameters truncated ... 'has_image__24': 0, 'is_delivered__24': 1, 'user_id__24': '1', 'embed_index__24': None, 'content__24': '너랑 시간 보내는 거 제일 좋아', 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'deleted_at__25': None, 'image_url__25': None, 'couple_id__25': '1', 'has_image__25': 0, 'is_delivered__25': 1, 'user_id__25': '2', 'embed_index__25': None, 'content__25': '나도야~ 🥰', 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'deleted_at__26': None, 'image_url__26': None, 'couple_id__26': '1', 'has_image__26': 0, 'is_delivered__26': 1, 'user_id__26': '1', 'embed_index__26': None, 'content__26': '일주일 진짜 빠르다', 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'deleted_at__27': None, 'image_url__27': None, 'couple_id__27': '1', 'has_image__27': 0, 'is_delivered__27': 1, 'user_id__27': '2', 'embed_index__27': None, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'deleted_at__28': None, 'image_url__28': None, 'couple_id__28': '1', 'has_image__28': 0, 'is_delivered__28': 1, 'user_id__28': '1', 'embed_index__28': None, 'content__28': '너 있어서 든든했어', 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'deleted_at__29': None, 'image_url__29': None, 'couple_id__29': '1', 'has_image__29': 0, 'is_delivered__29': 1, 'user_id__29': '2', 'embed_index__29': None, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘'}
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:09:00][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'user_id_1': '1'}
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:03][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] [generated in 0.00021s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {'user_id': '1', 'summary': '지민 values open and effective communication in relationships, emphasizing the importance of words to express affection. In times of conflict, they pre ... (311 characters truncated) ... tional bonds. Overall, their partnership approach is characterized by a harmonious blend of communication, understanding, and consistent interaction.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 3, 97578), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 3, 97582)}
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:03][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] [cached since 2.845s ago] {'user_id_1': '2'}
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:03][INFO][sqlalchemy.engine.Engine] [cached since 2.844s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:07][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:07][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:07][INFO][sqlalchemy.engine.Engine] [cached since 4.421s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:07][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:07][INFO][sqlalchemy.engine.Engine] [cached since 4.42s ago] {'user_id': '2', 'summary': '수아 values trust as a foundational element in their relationships, preferring to build connections that are grounded in mutual reliability and opennes ... (376 characters truncated) ... c. Ultimately, 수아 seeks a relationship with balanced independence, where both partners have the freedom to grow individually while staying connected.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 7, 517302), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 7, 517305)}
[2025-07-14 18:09:07][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:07][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:09:07][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:09:07][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:09:09][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:09:09][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:09:09][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:09:09][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:10][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 11, 88572), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 11, 88576), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 11, 122698)}
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00024s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s (insertmanyvalues) 1/1 (ordered)] {'custom_input__0': None, 'user_id__0': '1', 'choice_id__0': 2, 'question_id__0': 1, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 9, 9, 758832), 'custom_input__1': None, 'user_id__1': '1', 'choice_id__1': 8, 'question_id__1': 2, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 9, 9, 758854), 'custom_input__2': None, 'user_id__2': '1', 'choice_id__2': 13, 'question_id__2': 3, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 9, 9, 758863), 'custom_input__3': None, 'user_id__3': '1', 'choice_id__3': 21, 'question_id__3': 4, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 9, 9, 758871), 'custom_input__4': None, 'user_id__4': '1', 'choice_id__4': 26, 'question_id__4': 5, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 9, 9, 758880), 'custom_input__5': None, 'user_id__5': '2', 'choice_id__5': 1, 'question_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 9, 9, 758887), 'custom_input__6': None, 'user_id__6': '2', 'choice_id__6': 9, 'question_id__6': 2, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 9, 9, 758894), 'custom_input__7': None, 'user_id__7': '2', 'choice_id__7': 16, 'question_id__7': 3, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 9, 9, 758901), 'custom_input__8': None, 'user_id__8': '2', 'choice_id__8': 20, 'question_id__8': 4, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 9, 9, 758909), 'custom_input__9': None, 'user_id__9': '2', 'choice_id__9': 25, 'question_id__9': 5, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 9, 9, 758918)}
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s (insertmanyvalues) 1/1 (ordered)] {'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__0': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__1': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__2': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__3': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__4': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__5': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__6': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__7': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__8': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__9': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__10': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__11': '1', 'date__12': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__12': '애정' ... 8 parameters truncated ... 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'user_id__14': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__15': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__16': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__17': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__18': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__19': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'user_id__20': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__21': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__22': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__23': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'user_id__24': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__25': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'user_id__26': '2'}
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s (insertmanyvalues) 1/1 (ordered)] {'is_delivered__0': 1, 'couple_id__0': '1', 'image_url__0': None, 'deleted_at__0': None, 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'user_id__0': '1', 'embed_index__0': None, 'has_image__0': 0, 'is_delivered__1': 1, 'couple_id__1': '1', 'image_url__1': None, 'deleted_at__1': None, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'user_id__1': '2', 'embed_index__1': None, 'has_image__1': 0, 'is_delivered__2': 1, 'couple_id__2': '1', 'image_url__2': None, 'deleted_at__2': None, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'user_id__2': '1', 'embed_index__2': None, 'has_image__2': 0, 'is_delivered__3': 1, 'couple_id__3': '1', 'image_url__3': None, 'deleted_at__3': None, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'user_id__3': '2', 'embed_index__3': None, 'has_image__3': 0, 'is_delivered__4': 1, 'couple_id__4': '1', 'image_url__4': None, 'deleted_at__4': None, 'content__4': '어제 약속했는데 통화 못했네 😕', 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'user_id__4': '2', 'embed_index__4': None, 'has_image__4': 0, 'is_delivered__5': 1, 'couple_id__5': '1', 'image_url__5': None, 'deleted_at__5': None, 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ' ... 170 parameters truncated ... 'content__24': '너랑 시간 보내는 거 제일 좋아', 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'user_id__24': '1', 'embed_index__24': None, 'has_image__24': 0, 'is_delivered__25': 1, 'couple_id__25': '1', 'image_url__25': None, 'deleted_at__25': None, 'content__25': '나도야~ 🥰', 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'user_id__25': '2', 'embed_index__25': None, 'has_image__25': 0, 'is_delivered__26': 1, 'couple_id__26': '1', 'image_url__26': None, 'deleted_at__26': None, 'content__26': '일주일 진짜 빠르다', 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'user_id__26': '1', 'embed_index__26': None, 'has_image__26': 0, 'is_delivered__27': 1, 'couple_id__27': '1', 'image_url__27': None, 'deleted_at__27': None, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'user_id__27': '2', 'embed_index__27': None, 'has_image__27': 0, 'is_delivered__28': 1, 'couple_id__28': '1', 'image_url__28': None, 'deleted_at__28': None, 'content__28': '너 있어서 든든했어', 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'user_id__28': '1', 'embed_index__28': None, 'has_image__28': 0, 'is_delivered__29': 1, 'couple_id__29': '1', 'image_url__29': None, 'deleted_at__29': None, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'user_id__29': '2', 'embed_index__29': None, 'has_image__29': 0}
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:09:11][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {'user_id_1': '1'}
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:14][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id': '1', 'summary': '지민 values open and effective communication in their relationships, prioritizing meaningful dialogue. When conflicts arise, they prefer to remain calm ... (244 characters truncated) ... nected. Ultimately, they seek a deep and profound connection with their partner, striving for a relationship built on mutual understanding and trust.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 14, 215882), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 14, 215885)}
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:14][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] [cached since 2.905s ago] {'user_id_1': '2'}
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:14][INFO][sqlalchemy.engine.Engine] [cached since 2.904s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:16][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:17][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:17][INFO][sqlalchemy.engine.Engine] [cached since 2.797s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:17][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:17][INFO][sqlalchemy.engine.Engine] [cached since 2.798s ago] {'user_id': '2', 'summary': '수아 values trust as a fundamental aspect of their relationships, ensuring that a strong sense of reliability is maintained. In times of conflict, they ... (259 characters truncated) ...  with personal space. Overall, they seek a relationship characterized by balanced independence, where mutual support coexists with individual growth.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 17, 14296), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 17, 14300)}
[2025-07-14 18:09:17][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:17][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:09:17][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:09:17][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:09:23][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:09:23][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:09:23][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:09:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00019s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [generated in 0.00021s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 24, 948638), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 24, 948641), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 24, 982478)}
[2025-07-14 18:09:24][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00024s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'choice_id__0': 2, 'question_id__0': 1, 'custom_input__0': None, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 9, 23, 785807), 'user_id__1': '1', 'choice_id__1': 8, 'question_id__1': 2, 'custom_input__1': None, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 9, 23, 785832), 'user_id__2': '1', 'choice_id__2': 13, 'question_id__2': 3, 'custom_input__2': None, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 9, 23, 785844), 'user_id__3': '1', 'choice_id__3': 21, 'question_id__3': 4, 'custom_input__3': None, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 9, 23, 785856), 'user_id__4': '1', 'choice_id__4': 26, 'question_id__4': 5, 'custom_input__4': None, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 9, 23, 785869), 'user_id__5': '2', 'choice_id__5': 1, 'question_id__5': 1, 'custom_input__5': None, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 9, 23, 785878), 'user_id__6': '2', 'choice_id__6': 9, 'question_id__6': 2, 'custom_input__6': None, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 9, 23, 785888), 'user_id__7': '2', 'choice_id__7': 16, 'question_id__7': 3, 'custom_input__7': None, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 9, 23, 785899), 'user_id__8': '2', 'choice_id__8': 20, 'question_id__8': 4, 'custom_input__8': None, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 9, 23, 785910), 'user_id__9': '2', 'choice_id__9': 25, 'question_id__9': 5, 'custom_input__9': None, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 9, 23, 785922)}
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__1': '1', 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__2': '1', 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__3': '1', 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__4': '1', 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__5': '1', 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__6': '1', 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__7': '1', 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__8': '1', 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__9': '1', 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__10': '1', 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__11': '1', 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__12': '1', 'emotion__12': '애정' ... 8 parameters truncated ... 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__15': '2', 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__16': '2', 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__17': '2', 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__18': '2', 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__19': '2', 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__20': '2', 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__21': '2', 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__22': '2', 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__23': '2', 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__24': '2', 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__25': '2', 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__26': '2', 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'date__26': datetime.datetime(2025, 7, 7, 0, 0)}
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'is_delivered__0': 1, 'image_url__0': None, 'deleted_at__0': None, 'couple_id__0': '1', 'has_image__0': 0, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'embed_index__0': None, 'user_id__1': '2', 'is_delivered__1': 1, 'image_url__1': None, 'deleted_at__1': None, 'couple_id__1': '1', 'has_image__1': 0, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'embed_index__1': None, 'user_id__2': '1', 'is_delivered__2': 1, 'image_url__2': None, 'deleted_at__2': None, 'couple_id__2': '1', 'has_image__2': 0, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'embed_index__2': None, 'user_id__3': '2', 'is_delivered__3': 1, 'image_url__3': None, 'deleted_at__3': None, 'couple_id__3': '1', 'has_image__3': 0, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'embed_index__3': None, 'user_id__4': '2', 'is_delivered__4': 1, 'image_url__4': None, 'deleted_at__4': None, 'couple_id__4': '1', 'has_image__4': 0, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'content__4': '어제 약속했는데 통화 못했네 😕', 'embed_index__4': None, 'user_id__5': '1', 'is_delivered__5': 1, 'image_url__5': None, 'deleted_at__5': None, 'couple_id__5': '1' ... 170 parameters truncated ... 'couple_id__24': '1', 'has_image__24': 0, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'content__24': '너랑 시간 보내는 거 제일 좋아', 'embed_index__24': None, 'user_id__25': '2', 'is_delivered__25': 1, 'image_url__25': None, 'deleted_at__25': None, 'couple_id__25': '1', 'has_image__25': 0, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'content__25': '나도야~ 🥰', 'embed_index__25': None, 'user_id__26': '1', 'is_delivered__26': 1, 'image_url__26': None, 'deleted_at__26': None, 'couple_id__26': '1', 'has_image__26': 0, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'content__26': '일주일 진짜 빠르다', 'embed_index__26': None, 'user_id__27': '2', 'is_delivered__27': 1, 'image_url__27': None, 'deleted_at__27': None, 'couple_id__27': '1', 'has_image__27': 0, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'embed_index__27': None, 'user_id__28': '1', 'is_delivered__28': 1, 'image_url__28': None, 'deleted_at__28': None, 'couple_id__28': '1', 'has_image__28': 0, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'content__28': '너 있어서 든든했어', 'embed_index__28': None, 'user_id__29': '2', 'is_delivered__29': 1, 'image_url__29': None, 'deleted_at__29': None, 'couple_id__29': '1', 'has_image__29': 0, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'embed_index__29': None}
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:09:25][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'user_id_1': '1'}
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:28][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] [generated in 0.00028s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] [generated in 0.00024s] {'user_id': '1', 'summary': '지민 values open and effective communication in relationships, prioritizing clear dialogue to maintain strong connections. When conflicts arise, they p ... (265 characters truncated) ...  regular interaction to foster closeness. Ultimately, they seek deep, meaningful relationships that emphasize understanding and emotional connection.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 28, 20587), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 28, 20594)}
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:28][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] [cached since 2.74s ago] {'user_id_1': '2'}
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:28][INFO][sqlalchemy.engine.Engine] [cached since 2.74s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:30][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:30][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:30][INFO][sqlalchemy.engine.Engine] [cached since 2.445s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:30][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:30][INFO][sqlalchemy.engine.Engine] [cached since 2.442s ago] {'user_id': '2', 'summary': '수아 values trust as the foundation of her relationships, prioritizing reliability and honesty. In times of conflict, she prefers to wait it out, allow ... (225 characters truncated) ... ed connection that respects personal space. Overall, 수아 seeks a relationship with balanced independence, valuing both closeness and personal freedom.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 30, 463009), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 30, 463012)}
[2025-07-14 18:09:30][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:30][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:09:30][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:09:30][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:09:31][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:09:31][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:09:31][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:31][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [generated in 0.00026s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [generated in 0.00076s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [no key 0.00017s] {}
[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:32][INFO][sqlalchemy.engine.Engine] [no key 0.00038s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [no key 0.00018s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 33, 290453), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 33, 290458), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 33, 325616)}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00032s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'question_id__0': 1, 'custom_input__0': None, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 9, 32, 49521), 'choice_id__0': 2, 'user_id__1': '1', 'question_id__1': 2, 'custom_input__1': None, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 9, 32, 49556), 'choice_id__1': 8, 'user_id__2': '1', 'question_id__2': 3, 'custom_input__2': None, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 9, 32, 49572), 'choice_id__2': 13, 'user_id__3': '1', 'question_id__3': 4, 'custom_input__3': None, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 9, 32, 49588), 'choice_id__3': 21, 'user_id__4': '1', 'question_id__4': 5, 'custom_input__4': None, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 9, 32, 49604), 'choice_id__4': 26, 'user_id__5': '2', 'question_id__5': 1, 'custom_input__5': None, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 9, 32, 49617), 'choice_id__5': 1, 'user_id__6': '2', 'question_id__6': 2, 'custom_input__6': None, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 9, 32, 49629), 'choice_id__6': 9, 'user_id__7': '2', 'question_id__7': 3, 'custom_input__7': None, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 9, 32, 49643), 'choice_id__7': 16, 'user_id__8': '2', 'question_id__8': 4, 'custom_input__8': None, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 9, 32, 49658), 'choice_id__8': 20, 'user_id__9': '2', 'question_id__9': 5, 'custom_input__9': None, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 9, 32, 49674), 'choice_id__9': 25}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'emotion__0': '고마움', 'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'emotion__1': '기대감', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__2': '미안함', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'emotion__3': '죄책감', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'emotion__4': '사랑', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__5': '다정함', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__6': '친밀감', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'memo__6': '너와의 대화가 편하고 좋았어.', 'emotion__7': '억울함', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'emotion__8': '서운함', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'memo__8': '너의 반응이 조금 서운했어.', 'emotion__9': '행복', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'emotion__10': '감사', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'memo__10': '네가 있어줘서 고마운 하루였어.', 'emotion__11': '신뢰', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'emotion__12': '애정', 'user_id__12': '1' ... 8 parameters truncated ... 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'emotion__15': '서운함', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'memo__15': '너의 반응이 조금 서운했어.', 'emotion__16': '실망감', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'emotion__17': '이해', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'memo__17': '네 입장에서 생각해보게 됐어.', 'emotion__18': '다정함', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__19': '호감', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'memo__19': '너의 말투나 행동이 참 좋았어.', 'emotion__20': '편안함', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'memo__20': '너와 있으면 참 편안해.', 'emotion__21': '기대감', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__22': '불만', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'emotion__23': '기쁨', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'emotion__24': '감동', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'memo__24': '사소한 행동에도 감동했어.', 'emotion__25': '사랑', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__26': '안정감', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s (insertmanyvalues) 1/1 (ordered)] {'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'user_id__0': '1', 'has_image__0': 0, 'is_delivered__0': 1, 'image_url__0': None, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'deleted_at__0': None, 'couple_id__0': '1', 'embed_index__0': None, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'user_id__1': '2', 'has_image__1': 0, 'is_delivered__1': 1, 'image_url__1': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'deleted_at__1': None, 'couple_id__1': '1', 'embed_index__1': None, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'user_id__2': '1', 'has_image__2': 0, 'is_delivered__2': 1, 'image_url__2': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'deleted_at__2': None, 'couple_id__2': '1', 'embed_index__2': None, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'user_id__3': '2', 'has_image__3': 0, 'is_delivered__3': 1, 'image_url__3': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'deleted_at__3': None, 'couple_id__3': '1', 'embed_index__3': None, 'content__4': '어제 약속했는데 통화 못했네 😕', 'user_id__4': '2', 'has_image__4': 0, 'is_delivered__4': 1, 'image_url__4': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'deleted_at__4': None, 'couple_id__4': '1', 'embed_index__4': None, 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'user_id__5': '1', 'has_image__5': 0, 'is_delivered__5': 1, 'image_url__5': None ... 170 parameters truncated ... 'image_url__24': None, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'deleted_at__24': None, 'couple_id__24': '1', 'embed_index__24': None, 'content__25': '나도야~ 🥰', 'user_id__25': '2', 'has_image__25': 0, 'is_delivered__25': 1, 'image_url__25': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'deleted_at__25': None, 'couple_id__25': '1', 'embed_index__25': None, 'content__26': '일주일 진짜 빠르다', 'user_id__26': '1', 'has_image__26': 0, 'is_delivered__26': 1, 'image_url__26': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'deleted_at__26': None, 'couple_id__26': '1', 'embed_index__26': None, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'user_id__27': '2', 'has_image__27': 0, 'is_delivered__27': 1, 'image_url__27': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'deleted_at__27': None, 'couple_id__27': '1', 'embed_index__27': None, 'content__28': '너 있어서 든든했어', 'user_id__28': '1', 'has_image__28': 0, 'is_delivered__28': 1, 'image_url__28': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'deleted_at__28': None, 'couple_id__28': '1', 'embed_index__28': None, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'user_id__29': '2', 'has_image__29': 0, 'is_delivered__29': 1, 'image_url__29': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'deleted_at__29': None, 'couple_id__29': '1', 'embed_index__29': None}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:09:33][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1'}
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:36][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] [generated in 0.00026s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {'user_id': '1', 'summary': '지민 values open and honest communication in relationships, making it a priority to maintain clear dialogue with their partner. When conflicts arise, t ... (230 characters truncated) ... eking regular interaction to foster closeness. Ultimately, they strive for a deep, meaningful connection that goes beyond surface-level interactions.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 36, 132472), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 36, 132476)}
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:36][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] [cached since 2.514s ago] {'user_id_1': '2'}
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:36][INFO][sqlalchemy.engine.Engine] [cached since 2.509s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:39][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:39][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:39][INFO][sqlalchemy.engine.Engine] [cached since 3.17s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:39][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:39][INFO][sqlalchemy.engine.Engine] [cached since 3.168s ago] {'user_id': '2', 'summary': '수아 values trust as the foundation of her relationships and prefers to build strong, reliable connections with others. When conflicts arise, she tends ... (350 characters truncated) ... l, 수아 seeks a relationship characterized by balanced independence, where both partners have room to grow individually while maintaining a close bond.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 39, 300502), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 39, 300507)}
[2025-07-14 18:09:39][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:39][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:09:39][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:09:39][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:09:40][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:09:40][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:09:40][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:09:40][INFO][sqlalchemy.engine.Engine] [generated in 0.00024s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00019s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:09:41][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 41, 989538), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 41, 989540), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 42, 30219)}
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'custom_input__0': None, 'choice_id__0': 2, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 9, 40, 680105), 'question_id__0': 1, 'user_id__1': '1', 'custom_input__1': None, 'choice_id__1': 8, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 9, 40, 680119), 'question_id__1': 2, 'user_id__2': '1', 'custom_input__2': None, 'choice_id__2': 13, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 9, 40, 680127), 'question_id__2': 3, 'user_id__3': '1', 'custom_input__3': None, 'choice_id__3': 21, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 9, 40, 680135), 'question_id__3': 4, 'user_id__4': '1', 'custom_input__4': None, 'choice_id__4': 26, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 9, 40, 680143), 'question_id__4': 5, 'user_id__5': '2', 'custom_input__5': None, 'choice_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 9, 40, 680149), 'question_id__5': 1, 'user_id__6': '2', 'custom_input__6': None, 'choice_id__6': 9, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 9, 40, 680155), 'question_id__6': 2, 'user_id__7': '2', 'custom_input__7': None, 'choice_id__7': 16, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 9, 40, 680162), 'question_id__7': 3, 'user_id__8': '2', 'custom_input__8': None, 'choice_id__8': 20, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 9, 40, 680170), 'question_id__8': 4, 'user_id__9': '2', 'custom_input__9': None, 'choice_id__9': 25, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 9, 40, 680177), 'question_id__9': 5}
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s (insertmanyvalues) 1/1 (ordered)] {'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'emotion__0': '고마움', 'user_id__0': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__1': '기대감', 'user_id__1': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'emotion__2': '미안함', 'user_id__2': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'emotion__3': '죄책감', 'user_id__3': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__4': '사랑', 'user_id__4': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__5': '다정함', 'user_id__5': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'memo__6': '너와의 대화가 편하고 좋았어.', 'emotion__6': '친밀감', 'user_id__6': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'emotion__7': '억울함', 'user_id__7': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'memo__8': '너의 반응이 조금 서운했어.', 'emotion__8': '서운함', 'user_id__8': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'emotion__9': '행복', 'user_id__9': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'memo__10': '네가 있어줘서 고마운 하루였어.', 'emotion__10': '감사', 'user_id__10': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'emotion__11': '신뢰', 'user_id__11': '1', 'date__12': datetime.datetime(2025, 7, 7, 0, 0), 'memo__12': '너에 대한 애정이 넘쳤어.' ... 8 parameters truncated ... 'emotion__14': '바쁨', 'user_id__14': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'memo__15': '너의 반응이 조금 서운했어.', 'emotion__15': '서운함', 'user_id__15': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'emotion__16': '실망감', 'user_id__16': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'memo__17': '네 입장에서 생각해보게 됐어.', 'emotion__17': '이해', 'user_id__17': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__18': '다정함', 'user_id__18': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'memo__19': '너의 말투나 행동이 참 좋았어.', 'emotion__19': '호감', 'user_id__19': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'memo__20': '너와 있으면 참 편안해.', 'emotion__20': '편안함', 'user_id__20': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__21': '기대감', 'user_id__21': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'emotion__22': '불만', 'user_id__22': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'emotion__23': '기쁨', 'user_id__23': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'memo__24': '사소한 행동에도 감동했어.', 'emotion__24': '감동', 'user_id__24': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__25': '사랑', 'user_id__25': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'emotion__26': '안정감', 'user_id__26': '2'}
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00019s (insertmanyvalues) 1/1 (ordered)] {'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'deleted_at__0': None, 'image_url__0': None, 'user_id__0': '1', 'has_image__0': 0, 'is_delivered__0': 1, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'embed_index__0': None, 'couple_id__0': '1', 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'deleted_at__1': None, 'image_url__1': None, 'user_id__1': '2', 'has_image__1': 0, 'is_delivered__1': 1, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'embed_index__1': None, 'couple_id__1': '1', 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'deleted_at__2': None, 'image_url__2': None, 'user_id__2': '1', 'has_image__2': 0, 'is_delivered__2': 1, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'embed_index__2': None, 'couple_id__2': '1', 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'deleted_at__3': None, 'image_url__3': None, 'user_id__3': '2', 'has_image__3': 0, 'is_delivered__3': 1, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'embed_index__3': None, 'couple_id__3': '1', 'content__4': '어제 약속했는데 통화 못했네 😕', 'deleted_at__4': None, 'image_url__4': None, 'user_id__4': '2', 'has_image__4': 0, 'is_delivered__4': 1, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'embed_index__4': None, 'couple_id__4': '1', 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'deleted_at__5': None, 'image_url__5': None, 'user_id__5': '1', 'has_image__5': 0 ... 170 parameters truncated ... 'has_image__24': 0, 'is_delivered__24': 1, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'embed_index__24': None, 'couple_id__24': '1', 'content__25': '나도야~ 🥰', 'deleted_at__25': None, 'image_url__25': None, 'user_id__25': '2', 'has_image__25': 0, 'is_delivered__25': 1, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'embed_index__25': None, 'couple_id__25': '1', 'content__26': '일주일 진짜 빠르다', 'deleted_at__26': None, 'image_url__26': None, 'user_id__26': '1', 'has_image__26': 0, 'is_delivered__26': 1, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'embed_index__26': None, 'couple_id__26': '1', 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'deleted_at__27': None, 'image_url__27': None, 'user_id__27': '2', 'has_image__27': 0, 'is_delivered__27': 1, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'embed_index__27': None, 'couple_id__27': '1', 'content__28': '너 있어서 든든했어', 'deleted_at__28': None, 'image_url__28': None, 'user_id__28': '1', 'has_image__28': 0, 'is_delivered__28': 1, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'embed_index__28': None, 'couple_id__28': '1', 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'deleted_at__29': None, 'image_url__29': None, 'user_id__29': '2', 'has_image__29': 0, 'is_delivered__29': 1, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'embed_index__29': None, 'couple_id__29': '1'}
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {}
[2025-07-14 18:09:42][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] {'user_id_1': '1'}
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:45][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'user_id': '1', 'summary': '지민 values open and effective communication in relationships, prioritizing honest and meaningful conversations. During conflicts, they prefer to cool  ... (226 characters truncated) ... ning a consistent and close connection. Overall, they seek a deep emotional bond, emphasizing intimacy and understanding in their ideal relationship.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 45, 61601), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 45, 61604)}
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:45][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] [cached since 2.816s ago] {'user_id_1': '2'}
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:45][INFO][sqlalchemy.engine.Engine] [cached since 2.816s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:47][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:09:47][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:47][INFO][sqlalchemy.engine.Engine] [cached since 2.295s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:09:47][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:09:47][INFO][sqlalchemy.engine.Engine] [cached since 2.295s ago] {'user_id': '2', 'summary': '수아 values trust as the foundation of their relationships, prioritizing honesty and reliability. When conflicts arise, they prefer to wait it out, all ... (242 characters truncated) ... imately, they seek a relationship characterized by balanced independence, where both partners have room to grow individually while staying connected.', 'created_at': datetime.datetime(2025, 7, 14, 9, 9, 47, 356335), 'updated_at': datetime.datetime(2025, 7, 14, 9, 9, 47, 356338)}
[2025-07-14 18:09:47][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:47][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:09:47][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:09:47][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:09:56][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:09:56][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:09:56][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:09:56][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [generated in 0.00039s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 57, 972578), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 57, 972581), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:09:57][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 9, 58, 7002)}
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00004s (insertmanyvalues) 1/1 (ordered)] {'custom_input__0': None, 'user_id__0': '1', 'question_id__0': 1, 'choice_id__0': 2, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 9, 56, 810668), 'custom_input__1': None, 'user_id__1': '1', 'question_id__1': 2, 'choice_id__1': 8, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 9, 56, 810682), 'custom_input__2': None, 'user_id__2': '1', 'question_id__2': 3, 'choice_id__2': 13, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 9, 56, 810691), 'custom_input__3': None, 'user_id__3': '1', 'question_id__3': 4, 'choice_id__3': 21, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 9, 56, 810699), 'custom_input__4': None, 'user_id__4': '1', 'question_id__4': 5, 'choice_id__4': 26, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 9, 56, 810708), 'custom_input__5': None, 'user_id__5': '2', 'question_id__5': 1, 'choice_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 9, 56, 810714), 'custom_input__6': None, 'user_id__6': '2', 'question_id__6': 2, 'choice_id__6': 9, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 9, 56, 810720), 'custom_input__7': None, 'user_id__7': '2', 'question_id__7': 3, 'choice_id__7': 16, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 9, 56, 810727), 'custom_input__8': None, 'user_id__8': '2', 'question_id__8': 4, 'choice_id__8': 20, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 9, 56, 810734), 'custom_input__9': None, 'user_id__9': '2', 'question_id__9': 5, 'choice_id__9': 25, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 9, 56, 810742)}
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__0': '1', 'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__1': '1', 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__2': '1', 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__3': '1', 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__4': '1', 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__5': '1', 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__6': '1', 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__7': '1', 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__8': '1', 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__9': '1', 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__10': '1', 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__11': '1', 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'date__12': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__12': '1' ... 8 parameters truncated ... 'emotion__14': '바쁨', 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__15': '2', 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__16': '2', 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__17': '2', 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__18': '2', 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__19': '2', 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__20': '2', 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__21': '2', 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__22': '2', 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__23': '2', 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__24': '2', 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__25': '2', 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__26': '2', 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s (insertmanyvalues) 1/1 (ordered)] {'image_url__0': None, 'deleted_at__0': None, 'user_id__0': '1', 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'couple_id__0': '1', 'embed_index__0': None, 'has_image__0': 0, 'is_delivered__0': 1, 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'image_url__1': None, 'deleted_at__1': None, 'user_id__1': '2', 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'couple_id__1': '1', 'embed_index__1': None, 'has_image__1': 0, 'is_delivered__1': 1, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'image_url__2': None, 'deleted_at__2': None, 'user_id__2': '1', 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'couple_id__2': '1', 'embed_index__2': None, 'has_image__2': 0, 'is_delivered__2': 1, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'image_url__3': None, 'deleted_at__3': None, 'user_id__3': '2', 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'couple_id__3': '1', 'embed_index__3': None, 'has_image__3': 0, 'is_delivered__3': 1, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'image_url__4': None, 'deleted_at__4': None, 'user_id__4': '2', 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'couple_id__4': '1', 'embed_index__4': None, 'has_image__4': 0, 'is_delivered__4': 1, 'content__4': '어제 약속했는데 통화 못했네 😕', 'image_url__5': None, 'deleted_at__5': None, 'user_id__5': '1', 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40), 'couple_id__5': '1' ... 170 parameters truncated ... 'couple_id__24': '1', 'embed_index__24': None, 'has_image__24': 0, 'is_delivered__24': 1, 'content__24': '너랑 시간 보내는 거 제일 좋아', 'image_url__25': None, 'deleted_at__25': None, 'user_id__25': '2', 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'couple_id__25': '1', 'embed_index__25': None, 'has_image__25': 0, 'is_delivered__25': 1, 'content__25': '나도야~ 🥰', 'image_url__26': None, 'deleted_at__26': None, 'user_id__26': '1', 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'couple_id__26': '1', 'embed_index__26': None, 'has_image__26': 0, 'is_delivered__26': 1, 'content__26': '일주일 진짜 빠르다', 'image_url__27': None, 'deleted_at__27': None, 'user_id__27': '2', 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'couple_id__27': '1', 'embed_index__27': None, 'has_image__27': 0, 'is_delivered__27': 1, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'image_url__28': None, 'deleted_at__28': None, 'user_id__28': '1', 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'couple_id__28': '1', 'embed_index__28': None, 'has_image__28': 0, 'is_delivered__28': 1, 'content__28': '너 있어서 든든했어', 'image_url__29': None, 'deleted_at__29': None, 'user_id__29': '2', 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'couple_id__29': '1', 'embed_index__29': None, 'has_image__29': 0, 'is_delivered__29': 1, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘'}
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:09:58][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00032s] {'user_id_1': '1'}
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:09:58][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:10:00][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00036s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] {'user_id': '1', 'summary': '지민 values open communication in relationships and believes in addressing conflicts calmly before engaging in a discussion. They express affection thr ... (206 characters truncated) ... y a deep connection, aiming for emotional intimacy and understanding. Overall, 지민 prioritizes both transparency and closeness in their relationships.', 'created_at': datetime.datetime(2025, 7, 14, 9, 10, 0, 659339), 'updated_at': datetime.datetime(2025, 7, 14, 9, 10, 0, 659345)}
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:00][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] [cached since 2.473s ago] {'user_id_1': '2'}
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:10:00][INFO][sqlalchemy.engine.Engine] [cached since 2.488s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:10:03][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:10:03][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:10:03][INFO][sqlalchemy.engine.Engine] [cached since 2.776s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:10:03][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:10:03][INFO][sqlalchemy.engine.Engine] [cached since 2.773s ago] {'user_id': '2', 'summary': "수아 values trust as the foundation of her relationships, indicating that honesty and reliability are crucial to her. In times of conflict, she prefers ... (333 characters truncated) ... ent or distant. 수아's ideal relationship is one of balanced independence, where partners maintain their individuality while being mutually supportive.", 'created_at': datetime.datetime(2025, 7, 14, 9, 10, 3, 432197), 'updated_at': datetime.datetime(2025, 7, 14, 9, 10, 3, 432203)}
[2025-07-14 18:10:03][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:03][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:10:03][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:10:03][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:10:04][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:10:04][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:10:04][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {}
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:10:04][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:10:05][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [no key 0.00020s] {}
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [no key 0.00017s] {}
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 10, 6, 117586), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 10, 6, 117589), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 10, 6, 152513)}
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00004s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'question_id__0': 1, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 10, 4, 821536), 'choice_id__0': 2, 'custom_input__0': None, 'user_id__1': '1', 'question_id__1': 2, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 10, 4, 821552), 'choice_id__1': 8, 'custom_input__1': None, 'user_id__2': '1', 'question_id__2': 3, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 10, 4, 821561), 'choice_id__2': 13, 'custom_input__2': None, 'user_id__3': '1', 'question_id__3': 4, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 10, 4, 821569), 'choice_id__3': 21, 'custom_input__3': None, 'user_id__4': '1', 'question_id__4': 5, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 10, 4, 821578), 'choice_id__4': 26, 'custom_input__4': None, 'user_id__5': '2', 'question_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 10, 4, 821584), 'choice_id__5': 1, 'custom_input__5': None, 'user_id__6': '2', 'question_id__6': 2, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 10, 4, 821591), 'choice_id__6': 9, 'custom_input__6': None, 'user_id__7': '2', 'question_id__7': 3, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 10, 4, 821598), 'choice_id__7': 16, 'custom_input__7': None, 'user_id__8': '2', 'question_id__8': 4, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 10, 4, 821605), 'choice_id__8': 20, 'custom_input__8': None, 'user_id__9': '2', 'question_id__9': 5, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 10, 4, 821614), 'choice_id__9': 25, 'custom_input__9': None}
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'emotion__0': '고마움', 'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__1': '기대감', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'emotion__2': '미안함', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'emotion__3': '죄책감', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__4': '사랑', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__5': '다정함', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'memo__6': '너와의 대화가 편하고 좋았어.', 'emotion__6': '친밀감', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'emotion__7': '억울함', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'memo__8': '너의 반응이 조금 서운했어.', 'emotion__8': '서운함', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'emotion__9': '행복', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'memo__10': '네가 있어줘서 고마운 하루였어.', 'emotion__10': '감사', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'emotion__11': '신뢰', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'memo__12': '너에 대한 애정이 넘쳤어.', 'emotion__12': '애정' ... 8 parameters truncated ... 'user_id__14': '2', 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'memo__15': '너의 반응이 조금 서운했어.', 'emotion__15': '서운함', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'emotion__16': '실망감', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'memo__17': '네 입장에서 생각해보게 됐어.', 'emotion__17': '이해', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__18': '다정함', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'memo__19': '너의 말투나 행동이 참 좋았어.', 'emotion__19': '호감', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'memo__20': '너와 있으면 참 편안해.', 'emotion__20': '편안함', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__21': '기대감', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'emotion__22': '불만', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'emotion__23': '기쁨', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'memo__24': '사소한 행동에도 감동했어.', 'emotion__24': '감동', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__25': '사랑', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'emotion__26': '안정감', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0)}
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s (insertmanyvalues) 1/1 (ordered)] {'embed_index__0': None, 'user_id__0': '1', 'deleted_at__0': None, 'has_image__0': 0, 'couple_id__0': '1', 'is_delivered__0': 1, 'image_url__0': None, 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'embed_index__1': None, 'user_id__1': '2', 'deleted_at__1': None, 'has_image__1': 0, 'couple_id__1': '1', 'is_delivered__1': 1, 'image_url__1': None, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'embed_index__2': None, 'user_id__2': '1', 'deleted_at__2': None, 'has_image__2': 0, 'couple_id__2': '1', 'is_delivered__2': 1, 'image_url__2': None, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'embed_index__3': None, 'user_id__3': '2', 'deleted_at__3': None, 'has_image__3': 0, 'couple_id__3': '1', 'is_delivered__3': 1, 'image_url__3': None, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'embed_index__4': None, 'user_id__4': '2', 'deleted_at__4': None, 'has_image__4': 0, 'couple_id__4': '1', 'is_delivered__4': 1, 'image_url__4': None, 'content__4': '어제 약속했는데 통화 못했네 😕', 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'embed_index__5': None, 'user_id__5': '1', 'deleted_at__5': None, 'has_image__5': 0, 'couple_id__5': '1' ... 170 parameters truncated ... 'couple_id__24': '1', 'is_delivered__24': 1, 'image_url__24': None, 'content__24': '너랑 시간 보내는 거 제일 좋아', 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'embed_index__25': None, 'user_id__25': '2', 'deleted_at__25': None, 'has_image__25': 0, 'couple_id__25': '1', 'is_delivered__25': 1, 'image_url__25': None, 'content__25': '나도야~ 🥰', 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'embed_index__26': None, 'user_id__26': '1', 'deleted_at__26': None, 'has_image__26': 0, 'couple_id__26': '1', 'is_delivered__26': 1, 'image_url__26': None, 'content__26': '일주일 진짜 빠르다', 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'embed_index__27': None, 'user_id__27': '2', 'deleted_at__27': None, 'has_image__27': 0, 'couple_id__27': '1', 'is_delivered__27': 1, 'image_url__27': None, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'embed_index__28': None, 'user_id__28': '1', 'deleted_at__28': None, 'has_image__28': 0, 'couple_id__28': '1', 'is_delivered__28': 1, 'image_url__28': None, 'content__28': '너 있어서 든든했어', 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'embed_index__29': None, 'user_id__29': '2', 'deleted_at__29': None, 'has_image__29': 0, 'couple_id__29': '1', 'is_delivered__29': 1, 'image_url__29': None, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0)}
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {}
[2025-07-14 18:10:06][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00042s] {'user_id_1': '1'}
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:10:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:10:09][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] [generated in 0.00021s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {'user_id': '1', 'summary': '지민 values open communication in relationships and likes to address issues calmly before discussing them. They express affection primarily through wor ... (237 characters truncated) ... ection, emphasizing emotional intimacy and understanding. Overall, 지민 prioritizes clear communication and emotional closeness in their relationships.', 'created_at': datetime.datetime(2025, 7, 14, 9, 10, 9, 282522), 'updated_at': datetime.datetime(2025, 7, 14, 9, 10, 9, 282526)}
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:09][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] [cached since 2.94s ago] {'user_id_1': '2'}
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:10:09][INFO][sqlalchemy.engine.Engine] [cached since 2.941s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:10:11][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:10:11][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:10:11][INFO][sqlalchemy.engine.Engine] [cached since 2.496s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:10:11][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:10:11][INFO][sqlalchemy.engine.Engine] [cached since 2.495s ago] {'user_id': '2', 'summary': '수아 tends to value trust highly in their relationships, emphasizing honesty and reliability. When conflicts arise, they prefer to wait things out and  ... (275 characters truncated) ... rall, 수아 seeks a relationship that allows for balanced independence, where both partners can enjoy their individual pursuits while staying connected.', 'created_at': datetime.datetime(2025, 7, 14, 9, 10, 11, 777973), 'updated_at': datetime.datetime(2025, 7, 14, 9, 10, 11, 777977)}
[2025-07-14 18:10:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:10:11][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:10:11][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:10:11][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:14:53][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:14:53][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:14:53][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:14:54][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:14:54][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:14:54][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:14:59][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:14:59][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:14:59][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:14:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {}
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:15:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [no key 0.00018s] {}
[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:01][INFO][sqlalchemy.engine.Engine] [no key 0.00223s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00021s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00102s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 2, 450514), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 2, 450518), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 2, 483339)}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 15, 0, 296477), 'custom_input__0': None, 'choice_id__0': 2, 'user_id__0': '1', 'question_id__0': 1, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 15, 0, 296503), 'custom_input__1': None, 'choice_id__1': 8, 'user_id__1': '1', 'question_id__1': 2, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 15, 0, 296517), 'custom_input__2': None, 'choice_id__2': 13, 'user_id__2': '1', 'question_id__2': 3, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 15, 0, 296531), 'custom_input__3': None, 'choice_id__3': 21, 'user_id__3': '1', 'question_id__3': 4, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 15, 0, 296548), 'custom_input__4': None, 'choice_id__4': 26, 'user_id__4': '1', 'question_id__4': 5, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 15, 0, 296559), 'custom_input__5': None, 'choice_id__5': 1, 'user_id__5': '2', 'question_id__5': 1, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 15, 0, 296571), 'custom_input__6': None, 'choice_id__6': 9, 'user_id__6': '2', 'question_id__6': 2, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 15, 0, 296583), 'custom_input__7': None, 'choice_id__7': 16, 'user_id__7': '2', 'question_id__7': 3, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 15, 0, 296596), 'custom_input__8': None, 'choice_id__8': 20, 'user_id__8': '2', 'question_id__8': 4, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 15, 0, 296609), 'custom_input__9': None, 'choice_id__9': 25, 'user_id__9': '2', 'question_id__9': 5}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__0': '고마움', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__2': '미안함', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__4': '사랑', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__6': '친밀감', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__7': '억울함', 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__9': '행복', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__11': '신뢰', 'memo__12': '너에 대한 애정이 넘쳤어.', 'user_id__12': '1' ... 8 parameters truncated ... 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__14': '바쁨', 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__15': '서운함', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__17': '이해', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__19': '호감', 'memo__20': '너와 있으면 참 편안해.', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__21': '기대감', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__23': '기쁨', 'memo__24': '사소한 행동에도 감동했어.', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__25': '사랑', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감'}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s (insertmanyvalues) 1/1 (ordered)] {'image_url__0': None, 'is_delivered__0': 1, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'embed_index__0': None, 'user_id__0': '1', 'has_image__0': 0, 'couple_id__0': '1', 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'deleted_at__0': None, 'image_url__1': None, 'is_delivered__1': 1, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'embed_index__1': None, 'user_id__1': '2', 'has_image__1': 0, 'couple_id__1': '1', 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'deleted_at__1': None, 'image_url__2': None, 'is_delivered__2': 1, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'embed_index__2': None, 'user_id__2': '1', 'has_image__2': 0, 'couple_id__2': '1', 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'deleted_at__2': None, 'image_url__3': None, 'is_delivered__3': 1, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'embed_index__3': None, 'user_id__3': '2', 'has_image__3': 0, 'couple_id__3': '1', 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'deleted_at__3': None, 'image_url__4': None, 'is_delivered__4': 1, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'embed_index__4': None, 'user_id__4': '2', 'has_image__4': 0, 'couple_id__4': '1', 'content__4': '어제 약속했는데 통화 못했네 😕', 'deleted_at__4': None, 'image_url__5': None, 'is_delivered__5': 1, 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40), 'embed_index__5': None, 'user_id__5': '1' ... 170 parameters truncated ... 'user_id__24': '1', 'has_image__24': 0, 'couple_id__24': '1', 'content__24': '너랑 시간 보내는 거 제일 좋아', 'deleted_at__24': None, 'image_url__25': None, 'is_delivered__25': 1, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'embed_index__25': None, 'user_id__25': '2', 'has_image__25': 0, 'couple_id__25': '1', 'content__25': '나도야~ 🥰', 'deleted_at__25': None, 'image_url__26': None, 'is_delivered__26': 1, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'embed_index__26': None, 'user_id__26': '1', 'has_image__26': 0, 'couple_id__26': '1', 'content__26': '일주일 진짜 빠르다', 'deleted_at__26': None, 'image_url__27': None, 'is_delivered__27': 1, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'embed_index__27': None, 'user_id__27': '2', 'has_image__27': 0, 'couple_id__27': '1', 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'deleted_at__27': None, 'image_url__28': None, 'is_delivered__28': 1, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'embed_index__28': None, 'user_id__28': '1', 'has_image__28': 0, 'couple_id__28': '1', 'content__28': '너 있어서 든든했어', 'deleted_at__28': None, 'image_url__29': None, 'is_delivered__29': 1, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'embed_index__29': None, 'user_id__29': '2', 'has_image__29': 0, 'couple_id__29': '1', 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'deleted_at__29': None}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {}
[2025-07-14 18:15:02][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'user_id_1': '1'}
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:06][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00033s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] [generated in 0.00024s] {'user_id': '1', 'summary': '지민 values communication highly in relationships, emphasizing the importance of open and honest dialogue. When conflicts arise, they prefer to remain  ... (243 characters truncated) ... lar interaction helps them feel connected. Ultimately, they seek a deep and meaningful connection, prioritizing emotional intimacy and understanding.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 6, 742205), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 6, 742212)}
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:06][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] [cached since 3.979s ago] {'user_id_1': '2'}
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:06][INFO][sqlalchemy.engine.Engine] [cached since 3.979s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:11][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:11][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:11][INFO][sqlalchemy.engine.Engine] [cached since 4.927s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:11][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:11][INFO][sqlalchemy.engine.Engine] [cached since 4.925s ago] {'user_id': '2', 'summary': '수아 values trust as a cornerstone in relationships, preferring connections built on mutual reliability. When conflicts arise, they tend to adopt a pat ... (276 characters truncated) ... ngagement with personal space. Ultimately, 수아 seeks a relationship that allows for both closeness and independence, emphasizing a harmonious balance.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 11, 666567), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 11, 666576)}
[2025-07-14 18:15:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:11][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:15:11][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:15:11][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:15:12][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:15:12][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:15:12][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:12][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:13][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 14, 421707), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 14, 421710), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 14, 455678)}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00004s (insertmanyvalues) 1/1 (ordered)] {'choice_id__0': 2, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 15, 13, 106511), 'question_id__0': 1, 'user_id__0': '1', 'custom_input__0': None, 'choice_id__1': 8, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 15, 13, 106529), 'question_id__1': 2, 'user_id__1': '1', 'custom_input__1': None, 'choice_id__2': 13, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 15, 13, 106542), 'question_id__2': 3, 'user_id__2': '1', 'custom_input__2': None, 'choice_id__3': 21, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 15, 13, 106552), 'question_id__3': 4, 'user_id__3': '1', 'custom_input__3': None, 'choice_id__4': 26, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 15, 13, 106562), 'question_id__4': 5, 'user_id__4': '1', 'custom_input__4': None, 'choice_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 15, 13, 106569), 'question_id__5': 1, 'user_id__5': '2', 'custom_input__5': None, 'choice_id__6': 9, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 15, 13, 106576), 'question_id__6': 2, 'user_id__6': '2', 'custom_input__6': None, 'choice_id__7': 16, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 15, 13, 106585), 'question_id__7': 3, 'user_id__7': '2', 'custom_input__7': None, 'choice_id__8': 20, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 15, 13, 106593), 'question_id__8': 4, 'user_id__8': '2', 'custom_input__8': None, 'choice_id__9': 25, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 15, 13, 106603), 'question_id__9': 5, 'user_id__9': '2', 'custom_input__9': None}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__1': '1', 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__2': '1', 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__3': '1', 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__4': '1', 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__5': '1', 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__6': '1', 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__7': '1', 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__8': '1', 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__9': '1', 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__10': '1', 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__11': '1', 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__12': '1', 'emotion__12': '애정' ... 8 parameters truncated ... 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__15': '2', 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__16': '2', 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__17': '2', 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__18': '2', 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__19': '2', 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__20': '2', 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__21': '2', 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__22': '2', 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__23': '2', 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__24': '2', 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__25': '2', 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__26': '2', 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'date__26': datetime.datetime(2025, 7, 7, 0, 0)}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s (insertmanyvalues) 1/1 (ordered)] {'deleted_at__0': None, 'image_url__0': None, 'embed_index__0': None, 'is_delivered__0': 1, 'user_id__0': '1', 'has_image__0': 0, 'couple_id__0': '1', 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'deleted_at__1': None, 'image_url__1': None, 'embed_index__1': None, 'is_delivered__1': 1, 'user_id__1': '2', 'has_image__1': 0, 'couple_id__1': '1', 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'deleted_at__2': None, 'image_url__2': None, 'embed_index__2': None, 'is_delivered__2': 1, 'user_id__2': '1', 'has_image__2': 0, 'couple_id__2': '1', 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'deleted_at__3': None, 'image_url__3': None, 'embed_index__3': None, 'is_delivered__3': 1, 'user_id__3': '2', 'has_image__3': 0, 'couple_id__3': '1', 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'deleted_at__4': None, 'image_url__4': None, 'embed_index__4': None, 'is_delivered__4': 1, 'user_id__4': '2', 'has_image__4': 0, 'couple_id__4': '1', 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'content__4': '어제 약속했는데 통화 못했네 😕', 'deleted_at__5': None, 'image_url__5': None, 'embed_index__5': None, 'is_delivered__5': 1, 'user_id__5': '1' ... 170 parameters truncated ... 'user_id__24': '1', 'has_image__24': 0, 'couple_id__24': '1', 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'content__24': '너랑 시간 보내는 거 제일 좋아', 'deleted_at__25': None, 'image_url__25': None, 'embed_index__25': None, 'is_delivered__25': 1, 'user_id__25': '2', 'has_image__25': 0, 'couple_id__25': '1', 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'content__25': '나도야~ 🥰', 'deleted_at__26': None, 'image_url__26': None, 'embed_index__26': None, 'is_delivered__26': 1, 'user_id__26': '1', 'has_image__26': 0, 'couple_id__26': '1', 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'content__26': '일주일 진짜 빠르다', 'deleted_at__27': None, 'image_url__27': None, 'embed_index__27': None, 'is_delivered__27': 1, 'user_id__27': '2', 'has_image__27': 0, 'couple_id__27': '1', 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'deleted_at__28': None, 'image_url__28': None, 'embed_index__28': None, 'is_delivered__28': 1, 'user_id__28': '1', 'has_image__28': 0, 'couple_id__28': '1', 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'content__28': '너 있어서 든든했어', 'deleted_at__29': None, 'image_url__29': None, 'embed_index__29': None, 'is_delivered__29': 1, 'user_id__29': '2', 'has_image__29': 0, 'couple_id__29': '1', 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'content__29': '다음 주도 잘 지내보자! 사랑해 😘'}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:15:14][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'user_id_1': '1'}
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:17][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {'user_id': '1', 'summary': '지민 values open and effective communication in their relationships, ensuring that discussions are a key component of their connection. When conflicts  ... (267 characters truncated) ... ular interaction and engagement. Ultimately, they seek a deep connection, prioritizing emotional depth and understanding in their ideal relationship.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 17, 499620), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 17, 499625)}
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:17][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] [cached since 2.851s ago] {'user_id_1': '2'}
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:17][INFO][sqlalchemy.engine.Engine] [cached since 2.766s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:20][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:20][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:20][INFO][sqlalchemy.engine.Engine] [cached since 3.284s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:20][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:20][INFO][sqlalchemy.engine.Engine] [cached since 3.285s ago] {'user_id': '2', 'summary': '수아 values trust as the foundation of her relationships, indicating a preference for reliability and honesty. When conflicts arise, she tends to take  ... (335 characters truncated) ... ensuring both partners have space to grow individually. Overall, 수아 seeks a harmonious relationship where both trust and personal freedom are upheld.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 20, 784094), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 20, 784101)}
[2025-07-14 18:15:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:20][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:15:20][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:15:20][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:15:21][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:15:21][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:15:21][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:21][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00020s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00018s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:22][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 23, 339730), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 23, 339741), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 23, 375752)}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00004s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 15, 22, 124682), 'question_id__0': 1, 'custom_input__0': None, 'choice_id__0': 2, 'user_id__1': '1', 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 15, 22, 124698), 'question_id__1': 2, 'custom_input__1': None, 'choice_id__1': 8, 'user_id__2': '1', 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 15, 22, 124706), 'question_id__2': 3, 'custom_input__2': None, 'choice_id__2': 13, 'user_id__3': '1', 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 15, 22, 124715), 'question_id__3': 4, 'custom_input__3': None, 'choice_id__3': 21, 'user_id__4': '1', 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 15, 22, 124723), 'question_id__4': 5, 'custom_input__4': None, 'choice_id__4': 26, 'user_id__5': '2', 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 15, 22, 124729), 'question_id__5': 1, 'custom_input__5': None, 'choice_id__5': 1, 'user_id__6': '2', 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 15, 22, 124735), 'question_id__6': 2, 'custom_input__6': None, 'choice_id__6': 9, 'user_id__7': '2', 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 15, 22, 124742), 'question_id__7': 3, 'custom_input__7': None, 'choice_id__7': 16, 'user_id__8': '2', 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 15, 22, 124750), 'question_id__8': 4, 'custom_input__8': None, 'choice_id__8': 20, 'user_id__9': '2', 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 15, 22, 124758), 'question_id__9': 5, 'custom_input__9': None, 'choice_id__9': 25}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'emotion__0': '고마움', 'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'emotion__1': '기대감', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__2': '미안함', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'emotion__3': '죄책감', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'emotion__4': '사랑', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__5': '다정함', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__6': '친밀감', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'memo__6': '너와의 대화가 편하고 좋았어.', 'emotion__7': '억울함', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'emotion__8': '서운함', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'memo__8': '너의 반응이 조금 서운했어.', 'emotion__9': '행복', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'emotion__10': '감사', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'memo__10': '네가 있어줘서 고마운 하루였어.', 'emotion__11': '신뢰', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'emotion__12': '애정', 'user_id__12': '1' ... 8 parameters truncated ... 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'emotion__15': '서운함', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'memo__15': '너의 반응이 조금 서운했어.', 'emotion__16': '실망감', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'emotion__17': '이해', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'memo__17': '네 입장에서 생각해보게 됐어.', 'emotion__18': '다정함', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__19': '호감', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'memo__19': '너의 말투나 행동이 참 좋았어.', 'emotion__20': '편안함', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'memo__20': '너와 있으면 참 편안해.', 'emotion__21': '기대감', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__22': '불만', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'emotion__23': '기쁨', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'emotion__24': '감동', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'memo__24': '사소한 행동에도 감동했어.', 'emotion__25': '사랑', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__26': '안정감', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'couple_id__0': '1', 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'image_url__0': None, 'has_image__0': 0, 'is_delivered__0': 1, 'deleted_at__0': None, 'embed_index__0': None, 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'user_id__1': '2', 'couple_id__1': '1', 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'image_url__1': None, 'has_image__1': 0, 'is_delivered__1': 1, 'deleted_at__1': None, 'embed_index__1': None, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'user_id__2': '1', 'couple_id__2': '1', 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'image_url__2': None, 'has_image__2': 0, 'is_delivered__2': 1, 'deleted_at__2': None, 'embed_index__2': None, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'user_id__3': '2', 'couple_id__3': '1', 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'image_url__3': None, 'has_image__3': 0, 'is_delivered__3': 1, 'deleted_at__3': None, 'embed_index__3': None, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'user_id__4': '2', 'couple_id__4': '1', 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'image_url__4': None, 'has_image__4': 0, 'is_delivered__4': 1, 'deleted_at__4': None, 'embed_index__4': None, 'content__4': '어제 약속했는데 통화 못했네 😕', 'user_id__5': '1', 'couple_id__5': '1', 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40), 'image_url__5': None, 'has_image__5': 0 ... 170 parameters truncated ... 'has_image__24': 0, 'is_delivered__24': 1, 'deleted_at__24': None, 'embed_index__24': None, 'content__24': '너랑 시간 보내는 거 제일 좋아', 'user_id__25': '2', 'couple_id__25': '1', 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'image_url__25': None, 'has_image__25': 0, 'is_delivered__25': 1, 'deleted_at__25': None, 'embed_index__25': None, 'content__25': '나도야~ 🥰', 'user_id__26': '1', 'couple_id__26': '1', 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'image_url__26': None, 'has_image__26': 0, 'is_delivered__26': 1, 'deleted_at__26': None, 'embed_index__26': None, 'content__26': '일주일 진짜 빠르다', 'user_id__27': '2', 'couple_id__27': '1', 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'image_url__27': None, 'has_image__27': 0, 'is_delivered__27': 1, 'deleted_at__27': None, 'embed_index__27': None, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'user_id__28': '1', 'couple_id__28': '1', 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'image_url__28': None, 'has_image__28': 0, 'is_delivered__28': 1, 'deleted_at__28': None, 'embed_index__28': None, 'content__28': '너 있어서 든든했어', 'user_id__29': '2', 'couple_id__29': '1', 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'image_url__29': None, 'has_image__29': 0, 'is_delivered__29': 1, 'deleted_at__29': None, 'embed_index__29': None, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘'}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {}
[2025-07-14 18:15:23][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id_1': '1'}
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:25][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00022s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] {'user_id': '1', 'summary': '지민 values communication highly in relationships, prioritizing open and honest dialogue to build strong connections. When conflicts arise, 지민 prefers  ... (300 characters truncated) ...  to maintain closeness. Ultimately, 지민 seeks a deep, meaningful connection in relationships, focusing on emotional intimacy and mutual understanding.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 25, 951517), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 25, 951522)}
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:25][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] [cached since 2.296s ago] {'user_id_1': '2'}
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:25][INFO][sqlalchemy.engine.Engine] [cached since 2.295s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:28][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:28][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:28][INFO][sqlalchemy.engine.Engine] [cached since 2.507s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:28][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:28][INFO][sqlalchemy.engine.Engine] [cached since 2.507s ago] {'user_id': '2', 'summary': '수아 values trust as a fundamental aspect of her relationships, seeking partners who can establish and maintain this crucial element. When conflicts ar ... (295 characters truncated) ... ion without overwhelming her partner. Ultimately, she seeks a balanced relationship where both partners enjoy independence while remaining connected.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 28, 458117), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 28, 458123)}
[2025-07-14 18:15:28][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:28][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:15:28][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:15:28][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:15:32][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:15:32][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:15:32][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:32][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00019s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [generated in 0.00080s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00024s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00019s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00018s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 34, 13699), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 34, 13702), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 34, 48908)}
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'question_id__0': 1, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 15, 32, 887092), 'custom_input__0': None, 'choice_id__0': 2, 'user_id__1': '1', 'question_id__1': 2, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 15, 32, 887107), 'custom_input__1': None, 'choice_id__1': 8, 'user_id__2': '1', 'question_id__2': 3, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 15, 32, 887115), 'custom_input__2': None, 'choice_id__2': 13, 'user_id__3': '1', 'question_id__3': 4, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 15, 32, 887123), 'custom_input__3': None, 'choice_id__3': 21, 'user_id__4': '1', 'question_id__4': 5, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 15, 32, 887131), 'custom_input__4': None, 'choice_id__4': 26, 'user_id__5': '2', 'question_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 15, 32, 887136), 'custom_input__5': None, 'choice_id__5': 1, 'user_id__6': '2', 'question_id__6': 2, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 15, 32, 887142), 'custom_input__6': None, 'choice_id__6': 9, 'user_id__7': '2', 'question_id__7': 3, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 15, 32, 887149), 'custom_input__7': None, 'choice_id__7': 16, 'user_id__8': '2', 'question_id__8': 4, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 15, 32, 887156), 'custom_input__8': None, 'choice_id__8': 20, 'user_id__9': '2', 'question_id__9': 5, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 15, 32, 887164), 'custom_input__9': None, 'choice_id__9': 25}
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__0': '고마움', 'user_id__0': '1', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'user_id__1': '1', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__2': '미안함', 'user_id__2': '1', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'user_id__3': '1', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__4': '사랑', 'user_id__4': '1', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'user_id__5': '1', 'memo__6': '너와의 대화가 편하고 좋았어.', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__6': '친밀감', 'user_id__6': '1', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__7': '억울함', 'user_id__7': '1', 'memo__8': '너의 반응이 조금 서운했어.', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'user_id__8': '1', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__9': '행복', 'user_id__9': '1', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'user_id__10': '1', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__11': '신뢰', 'user_id__11': '1', 'memo__12': '너에 대한 애정이 넘쳤어.', 'date__12': datetime.datetime(2025, 7, 7, 0, 0) ... 8 parameters truncated ... 'emotion__14': '바쁨', 'user_id__14': '2', 'memo__15': '너의 반응이 조금 서운했어.', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__15': '서운함', 'user_id__15': '2', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'user_id__16': '2', 'memo__17': '네 입장에서 생각해보게 됐어.', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__17': '이해', 'user_id__17': '2', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'user_id__18': '2', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__19': '호감', 'user_id__19': '2', 'memo__20': '너와 있으면 참 편안해.', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'user_id__20': '2', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__21': '기대감', 'user_id__21': '2', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'user_id__22': '2', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__23': '기쁨', 'user_id__23': '2', 'memo__24': '사소한 행동에도 감동했어.', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'user_id__24': '2', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__25': '사랑', 'user_id__25': '2', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감', 'user_id__26': '2'}
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s (insertmanyvalues) 1/1 (ordered)] {'couple_id__0': '1', 'user_id__0': '1', 'embed_index__0': None, 'is_delivered__0': 1, 'deleted_at__0': None, 'has_image__0': 0, 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'image_url__0': None, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'couple_id__1': '1', 'user_id__1': '2', 'embed_index__1': None, 'is_delivered__1': 1, 'deleted_at__1': None, 'has_image__1': 0, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'image_url__1': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'couple_id__2': '1', 'user_id__2': '1', 'embed_index__2': None, 'is_delivered__2': 1, 'deleted_at__2': None, 'has_image__2': 0, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'image_url__2': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'couple_id__3': '1', 'user_id__3': '2', 'embed_index__3': None, 'is_delivered__3': 1, 'deleted_at__3': None, 'has_image__3': 0, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'image_url__3': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'couple_id__4': '1', 'user_id__4': '2', 'embed_index__4': None, 'is_delivered__4': 1, 'deleted_at__4': None, 'has_image__4': 0, 'content__4': '어제 약속했는데 통화 못했네 😕', 'image_url__4': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'couple_id__5': '1', 'user_id__5': '1', 'embed_index__5': None, 'is_delivered__5': 1, 'deleted_at__5': None ... 170 parameters truncated ... 'deleted_at__24': None, 'has_image__24': 0, 'content__24': '너랑 시간 보내는 거 제일 좋아', 'image_url__24': None, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'couple_id__25': '1', 'user_id__25': '2', 'embed_index__25': None, 'is_delivered__25': 1, 'deleted_at__25': None, 'has_image__25': 0, 'content__25': '나도야~ 🥰', 'image_url__25': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'couple_id__26': '1', 'user_id__26': '1', 'embed_index__26': None, 'is_delivered__26': 1, 'deleted_at__26': None, 'has_image__26': 0, 'content__26': '일주일 진짜 빠르다', 'image_url__26': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'couple_id__27': '1', 'user_id__27': '2', 'embed_index__27': None, 'is_delivered__27': 1, 'deleted_at__27': None, 'has_image__27': 0, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'image_url__27': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'couple_id__28': '1', 'user_id__28': '1', 'embed_index__28': None, 'is_delivered__28': 1, 'deleted_at__28': None, 'has_image__28': 0, 'content__28': '너 있어서 든든했어', 'image_url__28': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'couple_id__29': '1', 'user_id__29': '2', 'embed_index__29': None, 'is_delivered__29': 1, 'deleted_at__29': None, 'has_image__29': 0, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'image_url__29': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0)}
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {}
[2025-07-14 18:15:34][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id_1': '1'}
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:34][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:36][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] [generated in 0.00029s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {'user_id': '1', 'summary': '지민 values communication highly in relationships, prioritizing open and honest dialogue to foster understanding and connection. In times of conflict,  ... (236 characters truncated) ... eeking to maintain a close bond with their partner. Ultimately, 지민 aspires to build a relationship characterized by a deep and meaningful connection.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 36, 817601), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 36, 817606)}
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:36][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] [cached since 2.491s ago] {'user_id_1': '2'}
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:36][INFO][sqlalchemy.engine.Engine] [cached since 2.491s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:39][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:39][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:39][INFO][sqlalchemy.engine.Engine] [cached since 2.494s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:39][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:39][INFO][sqlalchemy.engine.Engine] [cached since 2.493s ago] {'user_id': '2', 'summary': '수아 values trust as the cornerstone of her relationships, suggesting she prioritizes honesty and dependability. When conflicts arise, she prefers to w ... (279 characters truncated) ... th personal space. Overall, 수아 seeks a relationship characterized by balanced independence, where both partners can thrive individually and together.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 39, 310046), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 39, 310049)}
[2025-07-14 18:15:39][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:39][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:15:39][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:15:39][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:15:40][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:15:40][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:15:40][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {}
[2025-07-14 18:15:40][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [generated in 0.00027s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 41, 878814), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 41, 878818), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 41, 912572)}
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:15:41][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00004s (insertmanyvalues) 1/1 (ordered)] {'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 15, 40, 769078), 'question_id__0': 1, 'custom_input__0': None, 'choice_id__0': 2, 'user_id__0': '1', 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 15, 40, 769093), 'question_id__1': 2, 'custom_input__1': None, 'choice_id__1': 8, 'user_id__1': '1', 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 15, 40, 769102), 'question_id__2': 3, 'custom_input__2': None, 'choice_id__2': 13, 'user_id__2': '1', 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 15, 40, 769110), 'question_id__3': 4, 'custom_input__3': None, 'choice_id__3': 21, 'user_id__3': '1', 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 15, 40, 769118), 'question_id__4': 5, 'custom_input__4': None, 'choice_id__4': 26, 'user_id__4': '1', 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 15, 40, 769124), 'question_id__5': 1, 'custom_input__5': None, 'choice_id__5': 1, 'user_id__5': '2', 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 15, 40, 769130), 'question_id__6': 2, 'custom_input__6': None, 'choice_id__6': 9, 'user_id__6': '2', 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 15, 40, 769137), 'question_id__7': 3, 'custom_input__7': None, 'choice_id__7': 16, 'user_id__7': '2', 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 15, 40, 769145), 'question_id__8': 4, 'custom_input__8': None, 'choice_id__8': 20, 'user_id__8': '2', 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 15, 40, 769153), 'question_id__9': 5, 'custom_input__9': None, 'choice_id__9': 25, 'user_id__9': '2'}
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'emotion__0': '고마움', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__0': '1', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'emotion__1': '기대감', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__1': '1', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__2': '미안함', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__2': '1', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'emotion__3': '죄책감', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__3': '1', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'emotion__4': '사랑', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__4': '1', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__5': '다정함', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__5': '1', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__6': '친밀감', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__6': '1', 'memo__6': '너와의 대화가 편하고 좋았어.', 'emotion__7': '억울함', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__7': '1', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'emotion__8': '서운함', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__8': '1', 'memo__8': '너의 반응이 조금 서운했어.', 'emotion__9': '행복', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__9': '1', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'emotion__10': '감사', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__10': '1', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'emotion__11': '신뢰', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__11': '1', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'emotion__12': '애정', 'date__12': datetime.datetime(2025, 7, 7, 0, 0) ... 8 parameters truncated ... 'user_id__14': '2', 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'emotion__15': '서운함', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__15': '2', 'memo__15': '너의 반응이 조금 서운했어.', 'emotion__16': '실망감', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__16': '2', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'emotion__17': '이해', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__17': '2', 'memo__17': '네 입장에서 생각해보게 됐어.', 'emotion__18': '다정함', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__18': '2', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__19': '호감', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__19': '2', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'emotion__20': '편안함', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__20': '2', 'memo__20': '너와 있으면 참 편안해.', 'emotion__21': '기대감', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__21': '2', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__22': '불만', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__22': '2', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'emotion__23': '기쁨', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__23': '2', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'emotion__24': '감동', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__24': '2', 'memo__24': '사소한 행동에도 감동했어.', 'emotion__25': '사랑', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__25': '2', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__26': '안정감', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__26': '2', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s (insertmanyvalues) 1/1 (ordered)] {'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'image_url__0': None, 'is_delivered__0': 1, 'embed_index__0': None, 'couple_id__0': '1', 'deleted_at__0': None, 'user_id__0': '1', 'has_image__0': 0, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'image_url__1': None, 'is_delivered__1': 1, 'embed_index__1': None, 'couple_id__1': '1', 'deleted_at__1': None, 'user_id__1': '2', 'has_image__1': 0, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'image_url__2': None, 'is_delivered__2': 1, 'embed_index__2': None, 'couple_id__2': '1', 'deleted_at__2': None, 'user_id__2': '1', 'has_image__2': 0, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'image_url__3': None, 'is_delivered__3': 1, 'embed_index__3': None, 'couple_id__3': '1', 'deleted_at__3': None, 'user_id__3': '2', 'has_image__3': 0, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'content__4': '어제 약속했는데 통화 못했네 😕', 'image_url__4': None, 'is_delivered__4': 1, 'embed_index__4': None, 'couple_id__4': '1', 'deleted_at__4': None, 'user_id__4': '2', 'has_image__4': 0, 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40), 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'image_url__5': None, 'is_delivered__5': 1, 'embed_index__5': None ... 170 parameters truncated ... 'embed_index__24': None, 'couple_id__24': '1', 'deleted_at__24': None, 'user_id__24': '1', 'has_image__24': 0, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'content__25': '나도야~ 🥰', 'image_url__25': None, 'is_delivered__25': 1, 'embed_index__25': None, 'couple_id__25': '1', 'deleted_at__25': None, 'user_id__25': '2', 'has_image__25': 0, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'content__26': '일주일 진짜 빠르다', 'image_url__26': None, 'is_delivered__26': 1, 'embed_index__26': None, 'couple_id__26': '1', 'deleted_at__26': None, 'user_id__26': '1', 'has_image__26': 0, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'image_url__27': None, 'is_delivered__27': 1, 'embed_index__27': None, 'couple_id__27': '1', 'deleted_at__27': None, 'user_id__27': '2', 'has_image__27': 0, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'content__28': '너 있어서 든든했어', 'image_url__28': None, 'is_delivered__28': 1, 'embed_index__28': None, 'couple_id__28': '1', 'deleted_at__28': None, 'user_id__28': '1', 'has_image__28': 0, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'image_url__29': None, 'is_delivered__29': 1, 'embed_index__29': None, 'couple_id__29': '1', 'deleted_at__29': None, 'user_id__29': '2', 'has_image__29': 0}
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {}
[2025-07-14 18:15:42][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'user_id_1': '1'}
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:42][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:44][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id': '1', 'summary': '지민 values open communication and often uses words to express affection, demonstrating a preference for verbal connection in relationships. They handl ... (272 characters truncated) ...  partners feel understood and valued. Overall, 지민 thrives in environments where open dialogue and consistent communication foster trust and intimacy.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 44, 777672), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 44, 777675)}
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:44][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] [cached since 2.593s ago] {'user_id_1': '2'}
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:44][INFO][sqlalchemy.engine.Engine] [cached since 2.59s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:47][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:47][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:47][INFO][sqlalchemy.engine.Engine] [cached since 2.425s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:47][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:47][INFO][sqlalchemy.engine.Engine] [cached since 2.512s ago] {'user_id': '2', 'summary': '수아 values trust in her relationships, prioritizing it as the foundation for connection. When conflicts arise, she prefers to wait it out, suggesting  ... (297 characters truncated) ... have space to grow individually while staying connected. Overall, her relationship tendencies highlight a harmonious blend of closeness and autonomy.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 47, 288986), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 47, 289004)}
[2025-07-14 18:15:47][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:47][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:15:47][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:15:47][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:15:52][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:15:52][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:15:52][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:15:53][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00017s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00020s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00017s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00024s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00019s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00023s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00022s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [no key 0.00018s] {}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 54, 487084), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 54, 487088), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 15, 54, 522259)}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00019s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00027s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s (insertmanyvalues) 1/1 (ordered)] {'custom_input__0': None, 'choice_id__0': 2, 'user_id__0': '1', 'question_id__0': 1, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 15, 53, 322402), 'custom_input__1': None, 'choice_id__1': 8, 'user_id__1': '1', 'question_id__1': 2, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 15, 53, 322420), 'custom_input__2': None, 'choice_id__2': 13, 'user_id__2': '1', 'question_id__2': 3, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 15, 53, 322431), 'custom_input__3': None, 'choice_id__3': 21, 'user_id__3': '1', 'question_id__3': 4, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 15, 53, 322439), 'custom_input__4': None, 'choice_id__4': 26, 'user_id__4': '1', 'question_id__4': 5, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 15, 53, 322448), 'custom_input__5': None, 'choice_id__5': 1, 'user_id__5': '2', 'question_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 15, 53, 322454), 'custom_input__6': None, 'choice_id__6': 9, 'user_id__6': '2', 'question_id__6': 2, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 15, 53, 322460), 'custom_input__7': None, 'choice_id__7': 16, 'user_id__7': '2', 'question_id__7': 3, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 15, 53, 322467), 'custom_input__8': None, 'choice_id__8': 20, 'user_id__8': '2', 'question_id__8': 4, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 15, 53, 322475), 'custom_input__9': None, 'choice_id__9': 25, 'user_id__9': '2', 'question_id__9': 5, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 15, 53, 322483)}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__12': '1', 'date__12': datetime.datetime(2025, 7, 7, 0, 0) ... 8 parameters truncated ... 'emotion__14': '바쁨', 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00027s (insertmanyvalues) 1/1 (ordered)] {'embed_index__0': None, 'deleted_at__0': None, 'user_id__0': '1', 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'image_url__0': None, 'couple_id__0': '1', 'has_image__0': 0, 'is_delivered__0': 1, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'embed_index__1': None, 'deleted_at__1': None, 'user_id__1': '2', 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'image_url__1': None, 'couple_id__1': '1', 'has_image__1': 0, 'is_delivered__1': 1, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'embed_index__2': None, 'deleted_at__2': None, 'user_id__2': '1', 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'image_url__2': None, 'couple_id__2': '1', 'has_image__2': 0, 'is_delivered__2': 1, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'embed_index__3': None, 'deleted_at__3': None, 'user_id__3': '2', 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'image_url__3': None, 'couple_id__3': '1', 'has_image__3': 0, 'is_delivered__3': 1, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'embed_index__4': None, 'deleted_at__4': None, 'user_id__4': '2', 'content__4': '어제 약속했는데 통화 못했네 😕', 'image_url__4': None, 'couple_id__4': '1', 'has_image__4': 0, 'is_delivered__4': 1, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'embed_index__5': None, 'deleted_at__5': None, 'user_id__5': '1', 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'image_url__5': None ... 170 parameters truncated ... 'image_url__24': None, 'couple_id__24': '1', 'has_image__24': 0, 'is_delivered__24': 1, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'embed_index__25': None, 'deleted_at__25': None, 'user_id__25': '2', 'content__25': '나도야~ 🥰', 'image_url__25': None, 'couple_id__25': '1', 'has_image__25': 0, 'is_delivered__25': 1, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'embed_index__26': None, 'deleted_at__26': None, 'user_id__26': '1', 'content__26': '일주일 진짜 빠르다', 'image_url__26': None, 'couple_id__26': '1', 'has_image__26': 0, 'is_delivered__26': 1, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'embed_index__27': None, 'deleted_at__27': None, 'user_id__27': '2', 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'image_url__27': None, 'couple_id__27': '1', 'has_image__27': 0, 'is_delivered__27': 1, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'embed_index__28': None, 'deleted_at__28': None, 'user_id__28': '1', 'content__28': '너 있어서 든든했어', 'image_url__28': None, 'couple_id__28': '1', 'has_image__28': 0, 'is_delivered__28': 1, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'embed_index__29': None, 'deleted_at__29': None, 'user_id__29': '2', 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'image_url__29': None, 'couple_id__29': '1', 'has_image__29': 0, 'is_delivered__29': 1, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0)}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {}
[2025-07-14 18:15:54][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {'user_id_1': '1'}
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:54][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:56][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] [generated in 0.00039s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] [generated in 0.00044s] {'user_id': '1', 'summary': '지민 values communication as a crucial aspect of their relationships, favoring open and honest dialogue. In times of conflict, they prefer to cool down ... (212 characters truncated) ... heir partner, valuing a consistent connection. Ultimately, they seek a deep, meaningful relationship, prioritizing emotional depth and understanding.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 56, 787597), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 56, 787606)}
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:56][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] [cached since 1.988s ago] {'user_id_1': '2'}
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:56][INFO][sqlalchemy.engine.Engine] [cached since 1.99s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:58][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:15:58][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:15:58][INFO][sqlalchemy.engine.Engine] [cached since 2.09s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:15:58][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:15:58][INFO][sqlalchemy.engine.Engine] [cached since 2.089s ago] {'user_id': '2', 'summary': '수아 values trust as the foundation of her relationships, ensuring a strong and reliable bond. When conflicts arise, she prefers to wait it out, allowi ... (202 characters truncated) ... tact, balancing personal space with connection. In her ideal relationship, she seeks balanced independence, valuing both closeness and individuality.', 'created_at': datetime.datetime(2025, 7, 14, 9, 15, 58, 876705), 'updated_at': datetime.datetime(2025, 7, 14, 9, 15, 58, 876712)}
[2025-07-14 18:15:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:15:58][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:15:58][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:15:58][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:15:59][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:15:59][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:15:59][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:15:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {}
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:16:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00020s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00021s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00020s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:01][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [no key 0.00017s] {}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 16, 2, 138842), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 16, 2, 138847), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 16, 2, 174977)}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00030s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s (insertmanyvalues) 1/1 (ordered)] {'question_id__0': 1, 'choice_id__0': 2, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 16, 0, 927671), 'user_id__0': '1', 'custom_input__0': None, 'question_id__1': 2, 'choice_id__1': 8, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 16, 0, 927689), 'user_id__1': '1', 'custom_input__1': None, 'question_id__2': 3, 'choice_id__2': 13, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 16, 0, 927700), 'user_id__2': '1', 'custom_input__2': None, 'question_id__3': 4, 'choice_id__3': 21, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 16, 0, 927711), 'user_id__3': '1', 'custom_input__3': None, 'question_id__4': 5, 'choice_id__4': 26, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 16, 0, 927722), 'user_id__4': '1', 'custom_input__4': None, 'question_id__5': 1, 'choice_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 16, 0, 927731), 'user_id__5': '2', 'custom_input__5': None, 'question_id__6': 2, 'choice_id__6': 9, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 16, 0, 927739), 'user_id__6': '2', 'custom_input__6': None, 'question_id__7': 3, 'choice_id__7': 16, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 16, 0, 927749), 'user_id__7': '2', 'custom_input__7': None, 'question_id__8': 4, 'choice_id__8': 20, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 16, 0, 927758), 'user_id__8': '2', 'custom_input__8': None, 'question_id__9': 5, 'choice_id__9': 25, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 16, 0, 927769), 'user_id__9': '2', 'custom_input__9': None}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'emotion__0': '고마움', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__1': '1', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__1': '기대감', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__2': '1', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'emotion__2': '미안함', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__3': '1', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'emotion__3': '죄책감', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__4': '1', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__4': '사랑', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__5': '1', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__5': '다정함', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__6': '1', 'memo__6': '너와의 대화가 편하고 좋았어.', 'emotion__6': '친밀감', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__7': '1', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'emotion__7': '억울함', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__8': '1', 'memo__8': '너의 반응이 조금 서운했어.', 'emotion__8': '서운함', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__9': '1', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'emotion__9': '행복', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__10': '1', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'emotion__10': '감사', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__11': '1', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'emotion__11': '신뢰', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__12': '1', 'memo__12': '너에 대한 애정이 넘쳤어.' ... 8 parameters truncated ... 'emotion__14': '바쁨', 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__15': '2', 'memo__15': '너의 반응이 조금 서운했어.', 'emotion__15': '서운함', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__16': '2', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'emotion__16': '실망감', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__17': '2', 'memo__17': '네 입장에서 생각해보게 됐어.', 'emotion__17': '이해', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__18': '2', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__18': '다정함', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__19': '2', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'emotion__19': '호감', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__20': '2', 'memo__20': '너와 있으면 참 편안해.', 'emotion__20': '편안함', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__21': '2', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__21': '기대감', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__22': '2', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'emotion__22': '불만', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__23': '2', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'emotion__23': '기쁨', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__24': '2', 'memo__24': '사소한 행동에도 감동했어.', 'emotion__24': '감동', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__25': '2', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__25': '사랑', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__26': '2', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'emotion__26': '안정감', 'date__26': datetime.datetime(2025, 7, 7, 0, 0)}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s (insertmanyvalues) 1/1 (ordered)] {'couple_id__0': '1', 'deleted_at__0': None, 'image_url__0': None, 'user_id__0': '1', 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'embed_index__0': None, 'has_image__0': 0, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'is_delivered__0': 1, 'couple_id__1': '1', 'deleted_at__1': None, 'image_url__1': None, 'user_id__1': '2', 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'embed_index__1': None, 'has_image__1': 0, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'is_delivered__1': 1, 'couple_id__2': '1', 'deleted_at__2': None, 'image_url__2': None, 'user_id__2': '1', 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'embed_index__2': None, 'has_image__2': 0, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'is_delivered__2': 1, 'couple_id__3': '1', 'deleted_at__3': None, 'image_url__3': None, 'user_id__3': '2', 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'embed_index__3': None, 'has_image__3': 0, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'is_delivered__3': 1, 'couple_id__4': '1', 'deleted_at__4': None, 'image_url__4': None, 'user_id__4': '2', 'content__4': '어제 약속했는데 통화 못했네 😕', 'embed_index__4': None, 'has_image__4': 0, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'is_delivered__4': 1, 'couple_id__5': '1', 'deleted_at__5': None, 'image_url__5': None, 'user_id__5': '1', 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ' ... 170 parameters truncated ... 'content__24': '너랑 시간 보내는 거 제일 좋아', 'embed_index__24': None, 'has_image__24': 0, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'is_delivered__24': 1, 'couple_id__25': '1', 'deleted_at__25': None, 'image_url__25': None, 'user_id__25': '2', 'content__25': '나도야~ 🥰', 'embed_index__25': None, 'has_image__25': 0, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'is_delivered__25': 1, 'couple_id__26': '1', 'deleted_at__26': None, 'image_url__26': None, 'user_id__26': '1', 'content__26': '일주일 진짜 빠르다', 'embed_index__26': None, 'has_image__26': 0, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'is_delivered__26': 1, 'couple_id__27': '1', 'deleted_at__27': None, 'image_url__27': None, 'user_id__27': '2', 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'embed_index__27': None, 'has_image__27': 0, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'is_delivered__27': 1, 'couple_id__28': '1', 'deleted_at__28': None, 'image_url__28': None, 'user_id__28': '1', 'content__28': '너 있어서 든든했어', 'embed_index__28': None, 'has_image__28': 0, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'is_delivered__28': 1, 'couple_id__29': '1', 'deleted_at__29': None, 'image_url__29': None, 'user_id__29': '2', 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'embed_index__29': None, 'has_image__29': 0, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'is_delivered__29': 1}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:16:02][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1'}
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:16:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:16:04][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'user_id': '1', 'summary': '지민 values open and effective communication in relationships, preferring to address conflicts by first cooling off and then engaging in a candid discu ... (289 characters truncated) ... ns, seeking relationships that are meaningful and emotionally fulfilling. Overall, 지민 prioritizes understanding and closeness in their relationships.', 'created_at': datetime.datetime(2025, 7, 14, 9, 16, 4, 812939), 'updated_at': datetime.datetime(2025, 7, 14, 9, 16, 4, 812943)}
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:04][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] [cached since 2.449s ago] {'user_id_1': '2'}
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:16:04][INFO][sqlalchemy.engine.Engine] [cached since 2.357s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:16:07][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:16:07][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:16:07][INFO][sqlalchemy.engine.Engine] [cached since 2.415s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:16:07][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:16:07][INFO][sqlalchemy.engine.Engine] [cached since 2.413s ago] {'user_id': '2', 'summary': '수아 values trust as the cornerstone of her relationships, prioritizing honesty and reliability. When faced with conflict, she prefers to give it time, ... (337 characters truncated) ... ce. Ultimately, 수아 seeks a relationship with balanced independence, where both partners can thrive individually while being supportive of each other.', 'created_at': datetime.datetime(2025, 7, 14, 9, 16, 7, 225790), 'updated_at': datetime.datetime(2025, 7, 14, 9, 16, 7, 225801)}
[2025-07-14 18:16:07][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:07][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:16:07][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:16:07][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:16:13][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:16:13][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:16:13][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:16:13][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00020s] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:16:14][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00020s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00019s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 16, 15, 495655), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 16, 15, 495659), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 16, 15, 618637)}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00019s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s (insertmanyvalues) 1/1 (ordered)] {'choice_id__0': 2, 'user_id__0': '1', 'custom_input__0': None, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 16, 14, 302719), 'question_id__0': 1, 'choice_id__1': 8, 'user_id__1': '1', 'custom_input__1': None, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 16, 14, 302737), 'question_id__1': 2, 'choice_id__2': 13, 'user_id__2': '1', 'custom_input__2': None, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 16, 14, 302745), 'question_id__2': 3, 'choice_id__3': 21, 'user_id__3': '1', 'custom_input__3': None, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 16, 14, 302754), 'question_id__3': 4, 'choice_id__4': 26, 'user_id__4': '1', 'custom_input__4': None, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 16, 14, 302763), 'question_id__4': 5, 'choice_id__5': 1, 'user_id__5': '2', 'custom_input__5': None, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 16, 14, 302770), 'question_id__5': 1, 'choice_id__6': 9, 'user_id__6': '2', 'custom_input__6': None, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 16, 14, 302777), 'question_id__6': 2, 'choice_id__7': 16, 'user_id__7': '2', 'custom_input__7': None, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 16, 14, 302784), 'question_id__7': 3, 'choice_id__8': 20, 'user_id__8': '2', 'custom_input__8': None, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 16, 14, 302792), 'question_id__8': 4, 'choice_id__9': 25, 'user_id__9': '2', 'custom_input__9': None, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 16, 14, 302801), 'question_id__9': 5}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s (insertmanyvalues) 1/1 (ordered)] {'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__12': '애정', 'memo__12': '너에 대한 애정이 넘쳤어.' ... 8 parameters truncated ... 'user_id__14': '2', 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0)}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s (insertmanyvalues) 1/1 (ordered)] {'is_delivered__0': 1, 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'deleted_at__0': None, 'image_url__0': None, 'user_id__0': '1', 'embed_index__0': None, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'has_image__0': 0, 'couple_id__0': '1', 'is_delivered__1': 1, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'deleted_at__1': None, 'image_url__1': None, 'user_id__1': '2', 'embed_index__1': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'has_image__1': 0, 'couple_id__1': '1', 'is_delivered__2': 1, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'deleted_at__2': None, 'image_url__2': None, 'user_id__2': '1', 'embed_index__2': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'has_image__2': 0, 'couple_id__2': '1', 'is_delivered__3': 1, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'deleted_at__3': None, 'image_url__3': None, 'user_id__3': '2', 'embed_index__3': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'has_image__3': 0, 'couple_id__3': '1', 'is_delivered__4': 1, 'content__4': '어제 약속했는데 통화 못했네 😕', 'deleted_at__4': None, 'image_url__4': None, 'user_id__4': '2', 'embed_index__4': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'has_image__4': 0, 'couple_id__4': '1', 'is_delivered__5': 1, 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'deleted_at__5': None, 'image_url__5': None, 'user_id__5': '1' ... 170 parameters truncated ... 'user_id__24': '1', 'embed_index__24': None, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'has_image__24': 0, 'couple_id__24': '1', 'is_delivered__25': 1, 'content__25': '나도야~ 🥰', 'deleted_at__25': None, 'image_url__25': None, 'user_id__25': '2', 'embed_index__25': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'has_image__25': 0, 'couple_id__25': '1', 'is_delivered__26': 1, 'content__26': '일주일 진짜 빠르다', 'deleted_at__26': None, 'image_url__26': None, 'user_id__26': '1', 'embed_index__26': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'has_image__26': 0, 'couple_id__26': '1', 'is_delivered__27': 1, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'deleted_at__27': None, 'image_url__27': None, 'user_id__27': '2', 'embed_index__27': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'has_image__27': 0, 'couple_id__27': '1', 'is_delivered__28': 1, 'content__28': '너 있어서 든든했어', 'deleted_at__28': None, 'image_url__28': None, 'user_id__28': '1', 'embed_index__28': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'has_image__28': 0, 'couple_id__28': '1', 'is_delivered__29': 1, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'deleted_at__29': None, 'image_url__29': None, 'user_id__29': '2', 'embed_index__29': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'has_image__29': 0, 'couple_id__29': '1'}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:16:15][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id_1': '1'}
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:16:15][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:16:17][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'user_id': '1', 'summary': '지민 values open and honest communication in relationships, ensuring that both partners are on the same page. When conflicts arise, 지민 prefers to remai ... (262 characters truncated) ...  as it helps maintain a sense of closeness and connection. Ultimately, 지민 seeks a deep and meaningful bond that goes beyond superficial interactions.', 'created_at': datetime.datetime(2025, 7, 14, 9, 16, 17, 815090), 'updated_at': datetime.datetime(2025, 7, 14, 9, 16, 17, 815093)}
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:17][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] [cached since 1.987s ago] {'user_id_1': '2'}
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:16:17][INFO][sqlalchemy.engine.Engine] [cached since 1.988s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:16:21][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:16:21][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:16:21][INFO][sqlalchemy.engine.Engine] [cached since 3.276s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:16:21][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:16:21][INFO][sqlalchemy.engine.Engine] [cached since 3.276s ago] {'user_id': '2', 'summary': '수아 values trust as a cornerstone of her relationships, ensuring that she can rely on her partner. In times of conflict, she prefers to wait it out, a ... (207 characters truncated) ... ce, ensuring both partners have space to grow individually. Overall, 수아 seeks a harmonious relationship built on mutual respect and personal freedom.', 'created_at': datetime.datetime(2025, 7, 14, 9, 16, 21, 91256), 'updated_at': datetime.datetime(2025, 7, 14, 9, 16, 21, 91259)}
[2025-07-14 18:16:21][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:16:21][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:16:21][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:16:21][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:17:08][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:17:08][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:17:09][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {}
[2025-07-14 18:17:09][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [generated in 0.00022s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00050s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00019s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00062s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00021s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 17, 10, 910539), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 17, 10, 910544), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [generated in 0.00027s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 17, 10, 947075)}
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:17:10][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00030s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s (insertmanyvalues) 1/1 (ordered)] {'custom_input__0': None, 'choice_id__0': 2, 'question_id__0': 1, 'user_id__0': '1', 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 17, 9, 681614), 'custom_input__1': None, 'choice_id__1': 8, 'question_id__1': 2, 'user_id__1': '1', 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 17, 9, 681628), 'custom_input__2': None, 'choice_id__2': 13, 'question_id__2': 3, 'user_id__2': '1', 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 17, 9, 681636), 'custom_input__3': None, 'choice_id__3': 21, 'question_id__3': 4, 'user_id__3': '1', 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 17, 9, 681644), 'custom_input__4': None, 'choice_id__4': 26, 'question_id__4': 5, 'user_id__4': '1', 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 17, 9, 681652), 'custom_input__5': None, 'choice_id__5': 1, 'question_id__5': 1, 'user_id__5': '2', 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 17, 9, 681658), 'custom_input__6': None, 'choice_id__6': 9, 'question_id__6': 2, 'user_id__6': '2', 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 17, 9, 681664), 'custom_input__7': None, 'choice_id__7': 16, 'question_id__7': 3, 'user_id__7': '2', 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 17, 9, 681670), 'custom_input__8': None, 'choice_id__8': 20, 'question_id__8': 4, 'user_id__8': '2', 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 17, 9, 681678), 'custom_input__9': None, 'choice_id__9': 25, 'question_id__9': 5, 'user_id__9': '2', 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 17, 9, 681685)}
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s (insertmanyvalues) 1/1 (ordered)] {'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__0': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__1': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__2': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__3': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__4': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__5': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__6': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__7': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__8': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__9': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__10': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__11': '1', 'date__12': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__12': '애정' ... 8 parameters truncated ... 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'user_id__14': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__15': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__16': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__17': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__18': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__19': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'user_id__20': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__21': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__22': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__23': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'user_id__24': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__25': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'user_id__26': '2'}
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s (insertmanyvalues) 1/1 (ordered)] {'couple_id__0': '1', 'deleted_at__0': None, 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'user_id__0': '1', 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'embed_index__0': None, 'has_image__0': 0, 'image_url__0': None, 'is_delivered__0': 1, 'couple_id__1': '1', 'deleted_at__1': None, 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'user_id__1': '2', 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'embed_index__1': None, 'has_image__1': 0, 'image_url__1': None, 'is_delivered__1': 1, 'couple_id__2': '1', 'deleted_at__2': None, 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'user_id__2': '1', 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'embed_index__2': None, 'has_image__2': 0, 'image_url__2': None, 'is_delivered__2': 1, 'couple_id__3': '1', 'deleted_at__3': None, 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'user_id__3': '2', 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'embed_index__3': None, 'has_image__3': 0, 'image_url__3': None, 'is_delivered__3': 1, 'couple_id__4': '1', 'deleted_at__4': None, 'content__4': '어제 약속했는데 통화 못했네 😕', 'user_id__4': '2', 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'embed_index__4': None, 'has_image__4': 0, 'image_url__4': None, 'is_delivered__4': 1, 'couple_id__5': '1', 'deleted_at__5': None, 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'user_id__5': '1', 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40) ... 170 parameters truncated ... 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'embed_index__24': None, 'has_image__24': 0, 'image_url__24': None, 'is_delivered__24': 1, 'couple_id__25': '1', 'deleted_at__25': None, 'content__25': '나도야~ 🥰', 'user_id__25': '2', 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'embed_index__25': None, 'has_image__25': 0, 'image_url__25': None, 'is_delivered__25': 1, 'couple_id__26': '1', 'deleted_at__26': None, 'content__26': '일주일 진짜 빠르다', 'user_id__26': '1', 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'embed_index__26': None, 'has_image__26': 0, 'image_url__26': None, 'is_delivered__26': 1, 'couple_id__27': '1', 'deleted_at__27': None, 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'user_id__27': '2', 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'embed_index__27': None, 'has_image__27': 0, 'image_url__27': None, 'is_delivered__27': 1, 'couple_id__28': '1', 'deleted_at__28': None, 'content__28': '너 있어서 든든했어', 'user_id__28': '1', 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'embed_index__28': None, 'has_image__28': 0, 'image_url__28': None, 'is_delivered__28': 1, 'couple_id__29': '1', 'deleted_at__29': None, 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'user_id__29': '2', 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'embed_index__29': None, 'has_image__29': 0, 'image_url__29': None, 'is_delivered__29': 1}
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {}
[2025-07-14 18:17:11][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'user_id_1': '1'}
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:17:11][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:17:13][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:17:13][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:17:13][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:17:13][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:17:13][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {'user_id': '1', 'summary': '지민 values open communication in relationships and approaches conflicts with a calm demeanor, preferring to talk things through once emotions have set ... (240 characters truncated) ... timacy and understanding in their ideal relationship. Overall, 지민 aims to build strong, supportive bonds through frequent and heartfelt interactions.', 'created_at': datetime.datetime(2025, 7, 14, 9, 17, 13, 968981), 'updated_at': datetime.datetime(2025, 7, 14, 9, 17, 13, 968985)}
[2025-07-14 18:17:13][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:14][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:17:14][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:14][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:17:14][INFO][sqlalchemy.engine.Engine] [cached since 2.735s ago] {'user_id_1': '2'}
[2025-07-14 18:17:14][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:17:14][INFO][sqlalchemy.engine.Engine] [cached since 2.733s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:17:17][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:17:17][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:17:17][INFO][sqlalchemy.engine.Engine] [cached since 3.946s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:17:17][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:17:17][INFO][sqlalchemy.engine.Engine] [cached since 4.029s ago] {'user_id': '2', 'summary': '수아 values trust as the cornerstone of her relationships, emphasizing the importance of reliability and authenticity. When conflicts arise, she prefer ... (317 characters truncated) ... on rhythm. Ultimately, 수아 seeks a balanced independence in her relationships, appreciating closeness while honoring personal space and individuality.', 'created_at': datetime.datetime(2025, 7, 14, 9, 17, 17, 997608), 'updated_at': datetime.datetime(2025, 7, 14, 9, 17, 17, 997629)}
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:18][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:17:18][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:17:18][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:17:18][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:17:18][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:17:18][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:17:18][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:17:19][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00005s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 17, 20, 664200), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 17, 20, 664203), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 17, 20, 700252)}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'choice_id__0': 2, 'question_id__0': 1, 'user_id__0': '1', 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 17, 19, 366430), 'custom_input__0': None, 'choice_id__1': 8, 'question_id__1': 2, 'user_id__1': '1', 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 17, 19, 366446), 'custom_input__1': None, 'choice_id__2': 13, 'question_id__2': 3, 'user_id__2': '1', 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 17, 19, 366454), 'custom_input__2': None, 'choice_id__3': 21, 'question_id__3': 4, 'user_id__3': '1', 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 17, 19, 366462), 'custom_input__3': None, 'choice_id__4': 26, 'question_id__4': 5, 'user_id__4': '1', 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 17, 19, 366470), 'custom_input__4': None, 'choice_id__5': 1, 'question_id__5': 1, 'user_id__5': '2', 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 17, 19, 366477), 'custom_input__5': None, 'choice_id__6': 9, 'question_id__6': 2, 'user_id__6': '2', 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 17, 19, 366483), 'custom_input__6': None, 'choice_id__7': 16, 'question_id__7': 3, 'user_id__7': '2', 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 17, 19, 366490), 'custom_input__7': None, 'choice_id__8': 20, 'question_id__8': 4, 'user_id__8': '2', 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 17, 19, 366498), 'custom_input__8': None, 'choice_id__9': 25, 'question_id__9': 5, 'user_id__9': '2', 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 17, 19, 366506), 'custom_input__9': None}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'emotion__0': '고마움', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__1': '1', 'emotion__1': '기대감', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__2': '1', 'emotion__2': '미안함', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__3': '1', 'emotion__3': '죄책감', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__4': '1', 'emotion__4': '사랑', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__5': '1', 'emotion__5': '다정함', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__6': '1', 'emotion__6': '친밀감', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__7': '1', 'emotion__7': '억울함', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__8': '1', 'emotion__8': '서운함', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__9': '1', 'emotion__9': '행복', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__10': '1', 'emotion__10': '감사', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__11': '1', 'emotion__11': '신뢰', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__12': '1', 'emotion__12': '애정' ... 8 parameters truncated ... 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'user_id__15': '2', 'emotion__15': '서운함', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__16': '2', 'emotion__16': '실망감', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__17': '2', 'emotion__17': '이해', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__18': '2', 'emotion__18': '다정함', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__19': '2', 'emotion__19': '호감', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__20': '2', 'emotion__20': '편안함', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'memo__20': '너와 있으면 참 편안해.', 'user_id__21': '2', 'emotion__21': '기대감', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__22': '2', 'emotion__22': '불만', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__23': '2', 'emotion__23': '기쁨', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__24': '2', 'emotion__24': '감동', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'memo__24': '사소한 행동에도 감동했어.', 'user_id__25': '2', 'emotion__25': '사랑', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__26': '2', 'emotion__26': '안정감', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s (insertmanyvalues) 1/1 (ordered)] {'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'deleted_at__0': None, 'is_delivered__0': 1, 'embed_index__0': None, 'user_id__0': '1', 'couple_id__0': '1', 'has_image__0': 0, 'image_url__0': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'deleted_at__1': None, 'is_delivered__1': 1, 'embed_index__1': None, 'user_id__1': '2', 'couple_id__1': '1', 'has_image__1': 0, 'image_url__1': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'deleted_at__2': None, 'is_delivered__2': 1, 'embed_index__2': None, 'user_id__2': '1', 'couple_id__2': '1', 'has_image__2': 0, 'image_url__2': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'deleted_at__3': None, 'is_delivered__3': 1, 'embed_index__3': None, 'user_id__3': '2', 'couple_id__3': '1', 'has_image__3': 0, 'image_url__3': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'content__4': '어제 약속했는데 통화 못했네 😕', 'deleted_at__4': None, 'is_delivered__4': 1, 'embed_index__4': None, 'user_id__4': '2', 'couple_id__4': '1', 'has_image__4': 0, 'image_url__4': None, 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40), 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'deleted_at__5': None, 'is_delivered__5': 1, 'embed_index__5': None ... 170 parameters truncated ... 'embed_index__24': None, 'user_id__24': '1', 'couple_id__24': '1', 'has_image__24': 0, 'image_url__24': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'content__25': '나도야~ 🥰', 'deleted_at__25': None, 'is_delivered__25': 1, 'embed_index__25': None, 'user_id__25': '2', 'couple_id__25': '1', 'has_image__25': 0, 'image_url__25': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'content__26': '일주일 진짜 빠르다', 'deleted_at__26': None, 'is_delivered__26': 1, 'embed_index__26': None, 'user_id__26': '1', 'couple_id__26': '1', 'has_image__26': 0, 'image_url__26': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'deleted_at__27': None, 'is_delivered__27': 1, 'embed_index__27': None, 'user_id__27': '2', 'couple_id__27': '1', 'has_image__27': 0, 'image_url__27': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'content__28': '너 있어서 든든했어', 'deleted_at__28': None, 'is_delivered__28': 1, 'embed_index__28': None, 'user_id__28': '1', 'couple_id__28': '1', 'has_image__28': 0, 'image_url__28': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'deleted_at__29': None, 'is_delivered__29': 1, 'embed_index__29': None, 'user_id__29': '2', 'couple_id__29': '1', 'has_image__29': 0, 'image_url__29': None}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {}
[2025-07-14 18:17:20][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {'user_id_1': '1'}
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:17:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:17:23][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'user_id': '1', 'summary': '지민 values communication highly in relationships, emphasizing the importance of open and honest dialogue. When conflicts arise, they prefer to take a  ... (296 characters truncated) ... tain closeness. Ultimately, they seek a relationship characterized by a deep connection, where both partners truly understand and support each other.', 'created_at': datetime.datetime(2025, 7, 14, 9, 17, 23, 455041), 'updated_at': datetime.datetime(2025, 7, 14, 9, 17, 23, 455043)}
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:23][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] [cached since 2.559s ago] {'user_id_1': '2'}
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:17:23][INFO][sqlalchemy.engine.Engine] [cached since 2.558s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:17:25][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:17:25][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:17:25][INFO][sqlalchemy.engine.Engine] [cached since 2.07s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:17:25][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:17:25][INFO][sqlalchemy.engine.Engine] [cached since 2.071s ago] {'user_id': '2', 'summary': '수아 values trust as the cornerstone of their relationships, preferring to build connections based on reliability and honesty. When conflicts arise, th ... (312 characters truncated) ... l, their ideal relationship allows for balanced independence, where both partners have the freedom to pursue their interests while staying connected.', 'created_at': datetime.datetime(2025, 7, 14, 9, 17, 25, 525662), 'updated_at': datetime.datetime(2025, 7, 14, 9, 17, 25, 525672)}
[2025-07-14 18:17:25][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:17:25][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:17:25][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:17:25][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:18:42][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:18:42][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:18:42][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:18:42][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [generated in 0.00019s] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:18:43][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00017s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 18, 44, 574059), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 18, 44, 574063), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 18, 44, 610290)}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'custom_input__0': None, 'user_id__0': '1', 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 18, 43, 256350), 'question_id__0': 1, 'choice_id__0': 2, 'custom_input__1': None, 'user_id__1': '1', 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 18, 43, 256377), 'question_id__1': 2, 'choice_id__1': 8, 'custom_input__2': None, 'user_id__2': '1', 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 18, 43, 256391), 'question_id__2': 3, 'choice_id__2': 13, 'custom_input__3': None, 'user_id__3': '1', 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 18, 43, 256405), 'question_id__3': 4, 'choice_id__3': 21, 'custom_input__4': None, 'user_id__4': '1', 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 18, 43, 256419), 'question_id__4': 5, 'choice_id__4': 26, 'custom_input__5': None, 'user_id__5': '2', 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 18, 43, 256430), 'question_id__5': 1, 'choice_id__5': 1, 'custom_input__6': None, 'user_id__6': '2', 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 18, 43, 256440), 'question_id__6': 2, 'choice_id__6': 9, 'custom_input__7': None, 'user_id__7': '2', 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 18, 43, 256452), 'question_id__7': 3, 'choice_id__7': 16, 'custom_input__8': None, 'user_id__8': '2', 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 18, 43, 256465), 'question_id__8': 4, 'choice_id__8': 20, 'custom_input__9': None, 'user_id__9': '2', 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 18, 43, 256479), 'question_id__9': 5, 'choice_id__9': 25}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__0': '1', 'emotion__0': '고마움', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__1': '1', 'emotion__1': '기대감', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__2': '1', 'emotion__2': '미안함', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__3': '1', 'emotion__3': '죄책감', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__4': '1', 'emotion__4': '사랑', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__5': '1', 'emotion__5': '다정함', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__6': '1', 'emotion__6': '친밀감', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__7': '1', 'emotion__7': '억울함', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__8': '1', 'emotion__8': '서운함', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__9': '1', 'emotion__9': '행복', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__10': '1', 'emotion__10': '감사', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__11': '1', 'emotion__11': '신뢰', 'date__12': datetime.datetime(2025, 7, 7, 0, 0), 'memo__12': '너에 대한 애정이 넘쳤어.' ... 8 parameters truncated ... 'user_id__14': '2', 'emotion__14': '바쁨', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__15': '2', 'emotion__15': '서운함', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__16': '2', 'emotion__16': '실망감', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__17': '2', 'emotion__17': '이해', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__18': '2', 'emotion__18': '다정함', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__19': '2', 'emotion__19': '호감', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'memo__20': '너와 있으면 참 편안해.', 'user_id__20': '2', 'emotion__20': '편안함', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__21': '2', 'emotion__21': '기대감', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__22': '2', 'emotion__22': '불만', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__23': '2', 'emotion__23': '기쁨', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'memo__24': '사소한 행동에도 감동했어.', 'user_id__24': '2', 'emotion__24': '감동', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__25': '2', 'emotion__25': '사랑', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'user_id__26': '2', 'emotion__26': '안정감'}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s (insertmanyvalues) 1/1 (ordered)] {'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'image_url__0': None, 'user_id__0': '1', 'is_delivered__0': 1, 'embed_index__0': None, 'deleted_at__0': None, 'has_image__0': 0, 'couple_id__0': '1', 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'image_url__1': None, 'user_id__1': '2', 'is_delivered__1': 1, 'embed_index__1': None, 'deleted_at__1': None, 'has_image__1': 0, 'couple_id__1': '1', 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'image_url__2': None, 'user_id__2': '1', 'is_delivered__2': 1, 'embed_index__2': None, 'deleted_at__2': None, 'has_image__2': 0, 'couple_id__2': '1', 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'image_url__3': None, 'user_id__3': '2', 'is_delivered__3': 1, 'embed_index__3': None, 'deleted_at__3': None, 'has_image__3': 0, 'couple_id__3': '1', 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'content__4': '어제 약속했는데 통화 못했네 😕', 'image_url__4': None, 'user_id__4': '2', 'is_delivered__4': 1, 'embed_index__4': None, 'deleted_at__4': None, 'has_image__4': 0, 'couple_id__4': '1', 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'image_url__5': None, 'user_id__5': '1', 'is_delivered__5': 1, 'embed_index__5': None ... 170 parameters truncated ... 'embed_index__24': None, 'deleted_at__24': None, 'has_image__24': 0, 'couple_id__24': '1', 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'content__25': '나도야~ 🥰', 'image_url__25': None, 'user_id__25': '2', 'is_delivered__25': 1, 'embed_index__25': None, 'deleted_at__25': None, 'has_image__25': 0, 'couple_id__25': '1', 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'content__26': '일주일 진짜 빠르다', 'image_url__26': None, 'user_id__26': '1', 'is_delivered__26': 1, 'embed_index__26': None, 'deleted_at__26': None, 'has_image__26': 0, 'couple_id__26': '1', 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'image_url__27': None, 'user_id__27': '2', 'is_delivered__27': 1, 'embed_index__27': None, 'deleted_at__27': None, 'has_image__27': 0, 'couple_id__27': '1', 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'content__28': '너 있어서 든든했어', 'image_url__28': None, 'user_id__28': '1', 'is_delivered__28': 1, 'embed_index__28': None, 'deleted_at__28': None, 'has_image__28': 0, 'couple_id__28': '1', 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'image_url__29': None, 'user_id__29': '2', 'is_delivered__29': 1, 'embed_index__29': None, 'deleted_at__29': None, 'has_image__29': 0, 'couple_id__29': '1', 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0)}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:18:44][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'user_id_1': '1'}
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:18:44][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:18:46][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] [generated in 0.00022s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] [generated in 0.00021s] {'user_id': '1', 'summary': '지민 values open and effective communication in relationships, preferring to discuss issues directly after taking a moment to cool down. They express a ... (146 characters truncated) ... re to stay actively engaged with their partner. Their ideal relationship is one of deep connection, emphasizing emotional intimacy and understanding.', 'created_at': datetime.datetime(2025, 7, 14, 9, 18, 46, 845477), 'updated_at': datetime.datetime(2025, 7, 14, 9, 18, 46, 845483)}
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:46][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] [cached since 2.03s ago] {'user_id_1': '2'}
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:18:46][INFO][sqlalchemy.engine.Engine] [cached since 2.031s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:18:50][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:18:50][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:18:50][INFO][sqlalchemy.engine.Engine] [cached since 3.797s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:18:50][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:18:50][INFO][sqlalchemy.engine.Engine] [cached since 3.795s ago] {'user_id': '2', 'summary': '수아 values trust as a cornerstone in their relationships, preferring to build strong, reliable bonds. When conflicts arise, they tend to adopt a wait- ... (295 characters truncated) ... . Ultimately, 수아 seeks a relationship characterized by balanced independence, where both partners maintain individuality while supporting each other.', 'created_at': datetime.datetime(2025, 7, 14, 9, 18, 50, 640374), 'updated_at': datetime.datetime(2025, 7, 14, 9, 18, 50, 640378)}
[2025-07-14 18:18:50][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:50][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:18:50][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:18:50][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:18:51][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:18:51][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:18:51][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:51][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:52][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [no key 0.00019s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [no key 0.00007s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 18, 53, 438110), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 18, 53, 438114), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 18, 53, 476946)}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00025s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'custom_input__0': None, 'question_id__0': 1, 'choice_id__0': 2, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 18, 52, 46244), 'user_id__1': '1', 'custom_input__1': None, 'question_id__1': 2, 'choice_id__1': 8, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 18, 52, 46259), 'user_id__2': '1', 'custom_input__2': None, 'question_id__2': 3, 'choice_id__2': 13, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 18, 52, 46266), 'user_id__3': '1', 'custom_input__3': None, 'question_id__3': 4, 'choice_id__3': 21, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 18, 52, 46274), 'user_id__4': '1', 'custom_input__4': None, 'question_id__4': 5, 'choice_id__4': 26, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 18, 52, 46282), 'user_id__5': '2', 'custom_input__5': None, 'question_id__5': 1, 'choice_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 18, 52, 46288), 'user_id__6': '2', 'custom_input__6': None, 'question_id__6': 2, 'choice_id__6': 9, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 18, 52, 46294), 'user_id__7': '2', 'custom_input__7': None, 'question_id__7': 3, 'choice_id__7': 16, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 18, 52, 46301), 'user_id__8': '2', 'custom_input__8': None, 'question_id__8': 4, 'choice_id__8': 20, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 18, 52, 46308), 'user_id__9': '2', 'custom_input__9': None, 'question_id__9': 5, 'choice_id__9': 25, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 18, 52, 46316)}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s (insertmanyvalues) 1/1 (ordered)] {'emotion__0': '고마움', 'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'emotion__1': '기대감', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__2': '미안함', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'emotion__3': '죄책감', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'emotion__4': '사랑', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__5': '다정함', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__6': '친밀감', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'memo__6': '너와의 대화가 편하고 좋았어.', 'emotion__7': '억울함', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'emotion__8': '서운함', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'memo__8': '너의 반응이 조금 서운했어.', 'emotion__9': '행복', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'emotion__10': '감사', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'memo__10': '네가 있어줘서 고마운 하루였어.', 'emotion__11': '신뢰', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'emotion__12': '애정', 'user_id__12': '1' ... 8 parameters truncated ... 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'emotion__15': '서운함', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'memo__15': '너의 반응이 조금 서운했어.', 'emotion__16': '실망감', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'emotion__17': '이해', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'memo__17': '네 입장에서 생각해보게 됐어.', 'emotion__18': '다정함', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'emotion__19': '호감', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'memo__19': '너의 말투나 행동이 참 좋았어.', 'emotion__20': '편안함', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'memo__20': '너와 있으면 참 편안해.', 'emotion__21': '기대감', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'emotion__22': '불만', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'emotion__23': '기쁨', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'emotion__24': '감동', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'memo__24': '사소한 행동에도 감동했어.', 'emotion__25': '사랑', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'emotion__26': '안정감', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s (insertmanyvalues) 1/1 (ordered)] {'has_image__0': 0, 'image_url__0': None, 'user_id__0': '1', 'couple_id__0': '1', 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'deleted_at__0': None, 'embed_index__0': None, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'is_delivered__0': 1, 'has_image__1': 0, 'image_url__1': None, 'user_id__1': '2', 'couple_id__1': '1', 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'deleted_at__1': None, 'embed_index__1': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'is_delivered__1': 1, 'has_image__2': 0, 'image_url__2': None, 'user_id__2': '1', 'couple_id__2': '1', 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'deleted_at__2': None, 'embed_index__2': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'is_delivered__2': 1, 'has_image__3': 0, 'image_url__3': None, 'user_id__3': '2', 'couple_id__3': '1', 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'deleted_at__3': None, 'embed_index__3': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'is_delivered__3': 1, 'has_image__4': 0, 'image_url__4': None, 'user_id__4': '2', 'couple_id__4': '1', 'content__4': '어제 약속했는데 통화 못했네 😕', 'deleted_at__4': None, 'embed_index__4': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'is_delivered__4': 1, 'has_image__5': 0, 'image_url__5': None, 'user_id__5': '1', 'couple_id__5': '1', 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ' ... 170 parameters truncated ... 'content__24': '너랑 시간 보내는 거 제일 좋아', 'deleted_at__24': None, 'embed_index__24': None, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'is_delivered__24': 1, 'has_image__25': 0, 'image_url__25': None, 'user_id__25': '2', 'couple_id__25': '1', 'content__25': '나도야~ 🥰', 'deleted_at__25': None, 'embed_index__25': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'is_delivered__25': 1, 'has_image__26': 0, 'image_url__26': None, 'user_id__26': '1', 'couple_id__26': '1', 'content__26': '일주일 진짜 빠르다', 'deleted_at__26': None, 'embed_index__26': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'is_delivered__26': 1, 'has_image__27': 0, 'image_url__27': None, 'user_id__27': '2', 'couple_id__27': '1', 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'deleted_at__27': None, 'embed_index__27': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'is_delivered__27': 1, 'has_image__28': 0, 'image_url__28': None, 'user_id__28': '1', 'couple_id__28': '1', 'content__28': '너 있어서 든든했어', 'deleted_at__28': None, 'embed_index__28': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'is_delivered__28': 1, 'has_image__29': 0, 'image_url__29': None, 'user_id__29': '2', 'couple_id__29': '1', 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'deleted_at__29': None, 'embed_index__29': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'is_delivered__29': 1}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:18:53][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'user_id_1': '1'}
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:18:53][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:18:55][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] [generated in 0.00014s] {'user_id': '1', 'summary': '지민 places high importance on communication in relationships, valuing open and honest dialogue. When conflicts arise, they prefer to take some time to ... (252 characters truncated) ... bond. Ultimately, they seek a deep connection in their relationships, prioritizing meaningful and intimate interactions over superficial engagements.', 'created_at': datetime.datetime(2025, 7, 14, 9, 18, 55, 593288), 'updated_at': datetime.datetime(2025, 7, 14, 9, 18, 55, 593292)}
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:55][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] [cached since 1.884s ago] {'user_id_1': '2'}
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:18:55][INFO][sqlalchemy.engine.Engine] [cached since 1.885s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:18:58][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:18:58][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:18:58][INFO][sqlalchemy.engine.Engine] [cached since 2.639s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:18:58][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:18:58][INFO][sqlalchemy.engine.Engine] [cached since 2.63s ago] {'user_id': '2', 'summary': '수아 values trust in her relationships and seeks partners who appreciate this fundamental aspect. She prefers to handle conflicts by giving them time t ... (268 characters truncated) ... luing both togetherness and personal space. Overall, 수아 strives for a harmonious relationship where mutual respect and understanding are prioritized.', 'created_at': datetime.datetime(2025, 7, 14, 9, 18, 58, 223587), 'updated_at': datetime.datetime(2025, 7, 14, 9, 18, 58, 223593)}
[2025-07-14 18:18:58][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:58][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:18:58][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:18:58][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:18:59][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:18:59][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:18:59][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [generated in 0.00022s] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:18:59][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:19:00][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [no key 0.00010s] {}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 1, 708490), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 1, 708495), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 1, 831382)}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 18, 59, 802751), 'custom_input__0': None, 'choice_id__0': 2, 'user_id__0': '1', 'question_id__0': 1, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 18, 59, 802786), 'custom_input__1': None, 'choice_id__1': 8, 'user_id__1': '1', 'question_id__1': 2, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 18, 59, 802797), 'custom_input__2': None, 'choice_id__2': 13, 'user_id__2': '1', 'question_id__2': 3, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 18, 59, 802808), 'custom_input__3': None, 'choice_id__3': 21, 'user_id__3': '1', 'question_id__3': 4, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 18, 59, 802819), 'custom_input__4': None, 'choice_id__4': 26, 'user_id__4': '1', 'question_id__4': 5, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 18, 59, 802828), 'custom_input__5': None, 'choice_id__5': 1, 'user_id__5': '2', 'question_id__5': 1, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 18, 59, 802836), 'custom_input__6': None, 'choice_id__6': 9, 'user_id__6': '2', 'question_id__6': 2, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 18, 59, 802846), 'custom_input__7': None, 'choice_id__7': 16, 'user_id__7': '2', 'question_id__7': 3, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 18, 59, 802855), 'custom_input__8': None, 'choice_id__8': 20, 'user_id__8': '2', 'question_id__8': 4, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 18, 59, 802866), 'custom_input__9': None, 'choice_id__9': 25, 'user_id__9': '2', 'question_id__9': 5}
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:19:01][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__0': '고마움', 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__1': '1', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'emotion__1': '기대감', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__2': '1', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__2': '미안함', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__3': '1', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__3': '죄책감', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__4': '1', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__4': '사랑', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__5': '1', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__5': '다정함', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__6': '1', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__6': '친밀감', 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__7': '1', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__7': '억울함', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__8': '1', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__8': '서운함', 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__9': '1', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__9': '행복', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__10': '1', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__10': '감사', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__11': '1', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__11': '신뢰', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__12': '1', 'date__12': datetime.datetime(2025, 7, 7, 0, 0) ... 8 parameters truncated ... 'emotion__14': '바쁨', 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'user_id__15': '2', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__15': '서운함', 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__16': '2', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'emotion__16': '실망감', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__17': '2', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__17': '이해', 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__18': '2', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'emotion__18': '다정함', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__19': '2', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__19': '호감', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__20': '2', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'emotion__20': '편안함', 'memo__20': '너와 있으면 참 편안해.', 'user_id__21': '2', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__21': '기대감', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__22': '2', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'emotion__22': '불만', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__23': '2', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__23': '기쁨', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__24': '2', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'emotion__24': '감동', 'memo__24': '사소한 행동에도 감동했어.', 'user_id__25': '2', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__25': '사랑', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__26': '2', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'emotion__26': '안정감', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s (insertmanyvalues) 1/1 (ordered)] {'has_image__0': 0, 'is_delivered__0': 1, 'image_url__0': None, 'deleted_at__0': None, 'embed_index__0': None, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'user_id__0': '1', 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'couple_id__0': '1', 'has_image__1': 0, 'is_delivered__1': 1, 'image_url__1': None, 'deleted_at__1': None, 'embed_index__1': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'user_id__1': '2', 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'couple_id__1': '1', 'has_image__2': 0, 'is_delivered__2': 1, 'image_url__2': None, 'deleted_at__2': None, 'embed_index__2': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'user_id__2': '1', 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'couple_id__2': '1', 'has_image__3': 0, 'is_delivered__3': 1, 'image_url__3': None, 'deleted_at__3': None, 'embed_index__3': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'user_id__3': '2', 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'couple_id__3': '1', 'has_image__4': 0, 'is_delivered__4': 1, 'image_url__4': None, 'deleted_at__4': None, 'embed_index__4': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'user_id__4': '2', 'content__4': '어제 약속했는데 통화 못했네 😕', 'couple_id__4': '1', 'has_image__5': 0, 'is_delivered__5': 1, 'image_url__5': None, 'deleted_at__5': None, 'embed_index__5': None ... 170 parameters truncated ... 'embed_index__24': None, 'created_at__24': datetime.datetime(2025, 7, 6, 18, 20), 'user_id__24': '1', 'content__24': '너랑 시간 보내는 거 제일 좋아', 'couple_id__24': '1', 'has_image__25': 0, 'is_delivered__25': 1, 'image_url__25': None, 'deleted_at__25': None, 'embed_index__25': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'user_id__25': '2', 'content__25': '나도야~ 🥰', 'couple_id__25': '1', 'has_image__26': 0, 'is_delivered__26': 1, 'image_url__26': None, 'deleted_at__26': None, 'embed_index__26': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'user_id__26': '1', 'content__26': '일주일 진짜 빠르다', 'couple_id__26': '1', 'has_image__27': 0, 'is_delivered__27': 1, 'image_url__27': None, 'deleted_at__27': None, 'embed_index__27': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'user_id__27': '2', 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'couple_id__27': '1', 'has_image__28': 0, 'is_delivered__28': 1, 'image_url__28': None, 'deleted_at__28': None, 'embed_index__28': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'user_id__28': '1', 'content__28': '너 있어서 든든했어', 'couple_id__28': '1', 'has_image__29': 0, 'is_delivered__29': 1, 'image_url__29': None, 'deleted_at__29': None, 'embed_index__29': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'user_id__29': '2', 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'couple_id__29': '1'}
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {}
[2025-07-14 18:19:02][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {'user_id_1': '1'}
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:02][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:19:05][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id': '1', 'summary': '지민 values communication highly in relationships, ensuring clear and open dialogues with partners. During conflicts, they prefer to maintain their com ... (183 characters truncated) ... ey appreciate regular interaction and connection. Ultimately, they seek a deep, meaningful relationship marked by mutual understanding and closeness.', 'created_at': datetime.datetime(2025, 7, 14, 9, 19, 5, 41831), 'updated_at': datetime.datetime(2025, 7, 14, 9, 19, 5, 41834)}
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:05][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] [cached since 2.983s ago] {'user_id_1': '2'}
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:05][INFO][sqlalchemy.engine.Engine] [cached since 2.98s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:19:08][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:19:08][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:08][INFO][sqlalchemy.engine.Engine] [cached since 2.977s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:19:08][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:19:08][INFO][sqlalchemy.engine.Engine] [cached since 3.055s ago] {'user_id': '2', 'summary': '수아 values trust as the cornerstone of her relationships, emphasizing a strong foundation of reliability and honesty. In times of conflict, she prefer ... (285 characters truncated) ... ly, 수아 strives for a relationship that supports balanced independence, ensuring both partners have room to grow individually while staying connected.', 'created_at': datetime.datetime(2025, 7, 14, 9, 19, 8, 96469), 'updated_at': datetime.datetime(2025, 7, 14, 9, 19, 8, 96474)}
[2025-07-14 18:19:08][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:08][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:19:08][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:19:08][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:19:16][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:19:16][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:19:16][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:16][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [generated in 0.00015s] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [generated in 0.00018s] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:17][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00053s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00047s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00050s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00036s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00027s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00046s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00035s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 18, 381106), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 18, 381115), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00051s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 18, 420183)}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00038s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00027s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'choice_id__0': 2, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 19, 17, 142739), 'user_id__0': '1', 'question_id__0': 1, 'custom_input__0': None, 'choice_id__1': 8, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 19, 17, 142756), 'user_id__1': '1', 'question_id__1': 2, 'custom_input__1': None, 'choice_id__2': 13, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 19, 17, 142764), 'user_id__2': '1', 'question_id__2': 3, 'custom_input__2': None, 'choice_id__3': 21, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 19, 17, 142772), 'user_id__3': '1', 'question_id__3': 4, 'custom_input__3': None, 'choice_id__4': 26, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 19, 17, 142780), 'user_id__4': '1', 'question_id__4': 5, 'custom_input__4': None, 'choice_id__5': 1, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 19, 17, 142787), 'user_id__5': '2', 'question_id__5': 1, 'custom_input__5': None, 'choice_id__6': 9, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 19, 17, 142793), 'user_id__6': '2', 'question_id__6': 2, 'custom_input__6': None, 'choice_id__7': 16, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 19, 17, 142800), 'user_id__7': '2', 'question_id__7': 3, 'custom_input__7': None, 'choice_id__8': 20, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 19, 17, 142807), 'user_id__8': '2', 'question_id__8': 4, 'custom_input__8': None, 'choice_id__9': 25, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 19, 17, 142815), 'user_id__9': '2', 'question_id__9': 5, 'custom_input__9': None}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s (insertmanyvalues) 1/1 (ordered)] {'user_id__0': '1', 'emotion__0': '고마움', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'user_id__1': '1', 'emotion__1': '기대감', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__2': '1', 'emotion__2': '미안함', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'user_id__3': '1', 'emotion__3': '죄책감', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'user_id__4': '1', 'emotion__4': '사랑', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__5': '1', 'emotion__5': '다정함', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__6': '1', 'emotion__6': '친밀감', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'memo__6': '너와의 대화가 편하고 좋았어.', 'user_id__7': '1', 'emotion__7': '억울함', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'user_id__8': '1', 'emotion__8': '서운함', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'memo__8': '너의 반응이 조금 서운했어.', 'user_id__9': '1', 'emotion__9': '행복', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'user_id__10': '1', 'emotion__10': '감사', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'memo__10': '네가 있어줘서 고마운 하루였어.', 'user_id__11': '1', 'emotion__11': '신뢰', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'user_id__12': '1', 'emotion__12': '애정' ... 8 parameters truncated ... 'date__14': datetime.datetime(2025, 7, 1, 0, 0), 'memo__14': '서로 바빠도 너를 떠올리게 됐어.', 'user_id__15': '2', 'emotion__15': '서운함', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'memo__15': '너의 반응이 조금 서운했어.', 'user_id__16': '2', 'emotion__16': '실망감', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'user_id__17': '2', 'emotion__17': '이해', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'memo__17': '네 입장에서 생각해보게 됐어.', 'user_id__18': '2', 'emotion__18': '다정함', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'user_id__19': '2', 'emotion__19': '호감', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'memo__19': '너의 말투나 행동이 참 좋았어.', 'user_id__20': '2', 'emotion__20': '편안함', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'memo__20': '너와 있으면 참 편안해.', 'user_id__21': '2', 'emotion__21': '기대감', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'user_id__22': '2', 'emotion__22': '불만', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'user_id__23': '2', 'emotion__23': '기쁨', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'user_id__24': '2', 'emotion__24': '감동', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'memo__24': '사소한 행동에도 감동했어.', 'user_id__25': '2', 'emotion__25': '사랑', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'user_id__26': '2', 'emotion__26': '안정감', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.'}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00044s (insertmanyvalues) 1/1 (ordered)] {'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'deleted_at__0': None, 'embed_index__0': None, 'user_id__0': '1', 'has_image__0': 0, 'couple_id__0': '1', 'is_delivered__0': 1, 'image_url__0': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'deleted_at__1': None, 'embed_index__1': None, 'user_id__1': '2', 'has_image__1': 0, 'couple_id__1': '1', 'is_delivered__1': 1, 'image_url__1': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'deleted_at__2': None, 'embed_index__2': None, 'user_id__2': '1', 'has_image__2': 0, 'couple_id__2': '1', 'is_delivered__2': 1, 'image_url__2': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'deleted_at__3': None, 'embed_index__3': None, 'user_id__3': '2', 'has_image__3': 0, 'couple_id__3': '1', 'is_delivered__3': 1, 'image_url__3': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'content__4': '어제 약속했는데 통화 못했네 😕', 'deleted_at__4': None, 'embed_index__4': None, 'user_id__4': '2', 'has_image__4': 0, 'couple_id__4': '1', 'is_delivered__4': 1, 'image_url__4': None, 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40), 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'deleted_at__5': None, 'embed_index__5': None, 'user_id__5': '1' ... 170 parameters truncated ... 'user_id__24': '1', 'has_image__24': 0, 'couple_id__24': '1', 'is_delivered__24': 1, 'image_url__24': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'content__25': '나도야~ 🥰', 'deleted_at__25': None, 'embed_index__25': None, 'user_id__25': '2', 'has_image__25': 0, 'couple_id__25': '1', 'is_delivered__25': 1, 'image_url__25': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'content__26': '일주일 진짜 빠르다', 'deleted_at__26': None, 'embed_index__26': None, 'user_id__26': '1', 'has_image__26': 0, 'couple_id__26': '1', 'is_delivered__26': 1, 'image_url__26': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'deleted_at__27': None, 'embed_index__27': None, 'user_id__27': '2', 'has_image__27': 0, 'couple_id__27': '1', 'is_delivered__27': 1, 'image_url__27': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'content__28': '너 있어서 든든했어', 'deleted_at__28': None, 'embed_index__28': None, 'user_id__28': '1', 'has_image__28': 0, 'couple_id__28': '1', 'is_delivered__28': 1, 'image_url__28': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'deleted_at__29': None, 'embed_index__29': None, 'user_id__29': '2', 'has_image__29': 0, 'couple_id__29': '1', 'is_delivered__29': 1, 'image_url__29': None}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {}
[2025-07-14 18:19:18][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00009s] {'user_id_1': '1'}
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:18][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:19:20][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00034s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] [generated in 0.00029s] {'user_id': '1', 'summary': "지민 values open communication and believes it's essential for a strong relationship. When conflicts arise, they prefer to take a moment to cool off be ... (145 characters truncated) ...  to keep in frequent contact, as regular interaction helps maintain the connection. Overall, they seek a deep and meaningful bond with their partner.", 'created_at': datetime.datetime(2025, 7, 14, 9, 19, 20, 701788), 'updated_at': datetime.datetime(2025, 7, 14, 9, 19, 20, 701796)}
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:20][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] [cached since 1.987s ago] {'user_id_1': '2'}
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:20][INFO][sqlalchemy.engine.Engine] [cached since 1.994s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:19:24][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:19:24][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:24][INFO][sqlalchemy.engine.Engine] [cached since 3.953s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:19:24][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:19:24][INFO][sqlalchemy.engine.Engine] [cached since 3.95s ago] {'user_id': '2', 'summary': '수아 values trust as a cornerstone in her relationships, indicating her need for a stable and reliable connection with her partner. During conflicts, s ... (323 characters truncated) ... for both independence and togetherness. Overall, 수아 thrives in relationships that offer security, mutual understanding, and room for personal growth.', 'created_at': datetime.datetime(2025, 7, 14, 9, 19, 24, 651058), 'updated_at': datetime.datetime(2025, 7, 14, 9, 19, 24, 651068)}
[2025-07-14 18:19:24][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:24][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:19:24][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:19:24][INFO][root] 유저 성향 분석/요약 완료
[2025-07-14 18:19:25][INFO][faiss.loader] Loading faiss.
[2025-07-14 18:19:25][INFO][faiss.loader] Successfully loaded faiss.
[2025-07-14 18:19:25][INFO][faiss] Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes. This is only an error if you're trying to use GPU Faiss.
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:25][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [generated in 0.00016s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DROP DATABASE IF EXISTS test_db
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [generated in 0.00017s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] SELECT DATABASE()
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] SELECT @@sql_mode
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] SELECT @@lower_case_table_names
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
            CREATE DATABASE IF NOT EXISTS test_db
            CHARACTER SET utf8mb4
            COLLATE utf8mb4_unicode_ci
        
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [generated in 0.00011s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`users`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couples`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`messages`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_messages`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`persona_config`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`emotion_logs`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`weekly_solutions`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`aidaily_analysis_results`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_daily_analysis_results`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_trait_summaries`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`ai_chat_summaries`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`couple_chat_summaries`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_questions`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`survey_choices`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] DESCRIBE `test_db`.`user_survey_responses`
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [raw sql] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE users (
	user_id VARCHAR(255) NOT NULL, 
	name VARCHAR(255) NOT NULL, 
	email VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	birth DATETIME, 
	gender ENUM('male','female','other'), 
	PRIMARY KEY (user_id), 
	UNIQUE (email)
)


[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [no key 0.00098s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_questions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	code VARCHAR(255), 
	text VARCHAR(255) NOT NULL, 
	`order` INTEGER, 
	PRIMARY KEY (id), 
	UNIQUE (code)
)


[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [no key 0.00023s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couples (
	couple_id VARCHAR(255) NOT NULL, 
	user_1 VARCHAR(255) NOT NULL, 
	user_2 VARCHAR(255) NOT NULL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(user_1) REFERENCES users (user_id), 
	FOREIGN KEY(user_2) REFERENCES users (user_id)
)


[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE emotion_logs (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	emotion TEXT, 
	date DATETIME, 
	memo TEXT, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE weekly_solutions (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [no key 0.00008s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_trait_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	created_at DATETIME, 
	updated_at DATETIME, 
	PRIMARY KEY (id), 
	UNIQUE (user_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id)
)


[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [no key 0.00006s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE survey_choices (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	question_id INTEGER, 
	text VARCHAR(255) NOT NULL, 
	tag VARCHAR(255), 
	PRIMARY KEY (id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id)
)


[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [no key 0.00011s] {}
[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE messages (
	chat_id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	content TEXT, 
	image_url TEXT, 
	has_image BOOL, 
	created_at DATETIME, 
	deleted_at DATETIME, 
	is_delivered BOOL, 
	embed_index INTEGER, 
	PRIMARY KEY (chat_id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:26][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_messages (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	role VARCHAR(20) NOT NULL, 
	content TEXT NOT NULL, 
	created_at DATETIME, 
	embed_index INTEGER, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [no key 0.00009s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE persona_config (
	couple_id VARCHAR(255) NOT NULL, 
	persona_name VARCHAR(255), 
	updated_at DATETIME, 
	PRIMARY KEY (couple_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [no key 0.00013s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] CREATE INDEX ix_persona_config_couple_id ON persona_config (couple_id)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [no key 0.00022s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE aidaily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255), 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [no key 0.00012s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_daily_analysis_results (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	date DATETIME NOT NULL, 
	result TEXT NOT NULL, 
	created_at DATETIME, 
	modified_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE ai_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255) NOT NULL, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	last_msg_id INTEGER NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [no key 0.00015s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE couple_chat_summaries (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	couple_id VARCHAR(255) NOT NULL, 
	summary TEXT NOT NULL, 
	emb_id INTEGER, 
	created_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(couple_id) REFERENCES couples (couple_id)
)


[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [no key 0.00016s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] 
CREATE TABLE user_survey_responses (
	id INTEGER NOT NULL AUTO_INCREMENT, 
	user_id VARCHAR(255), 
	question_id INTEGER, 
	choice_id INTEGER, 
	custom_input TEXT, 
	submitted_at DATETIME, 
	PRIMARY KEY (id), 
	FOREIGN KEY(user_id) REFERENCES users (user_id), 
	FOREIGN KEY(question_id) REFERENCES survey_questions (id), 
	FOREIGN KEY(choice_id) REFERENCES survey_choices (id)
)


[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [no key 0.00014s] {}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] INSERT INTO users (user_id, name, email, created_at, deleted_at, modified_at, birth, gender) VALUES (%(user_id)s, %(name)s, %(email)s, %(created_at)s, %(deleted_at)s, %(modified_at)s, %(birth)s, %(gender)s)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00013s] [{'user_id': '1', 'name': '지민', 'email': 'user1@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 27, 307363), 'birth': None, 'gender': 'male'}, {'user_id': '2', 'name': '수아', 'email': 'user2@test.com', 'created_at': datetime.datetime(2025, 7, 10, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 27, 307368), 'birth': None, 'gender': 'female'}]
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] INSERT INTO couples (couple_id, user_1, user_2, created_at, deleted_at, modified_at) VALUES (%(couple_id)s, %(user_1)s, %(user_2)s, %(created_at)s, %(deleted_at)s, %(modified_at)s)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] {'couple_id': '1', 'user_1': '1', 'user_2': '2', 'created_at': datetime.datetime(2023, 11, 3, 0, 0), 'deleted_at': None, 'modified_at': datetime.datetime(2025, 7, 14, 9, 19, 27, 343719)}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_questions (id, code, text, `order`) VALUES (%(id)s, %(code)s, %(text)s, %(order)s)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00008s] [{'id': 1, 'code': 'relationship_value', 'text': '연애에서 내가 가장 중요하게 생각하는 가치는 무엇인가요? (가장 가까운 걸 골라주세요)', 'order': 1}, {'id': 2, 'code': 'conflict_response', 'text': '연인과 다툼이 생겼을 때 나는 어떻게 대처하나요?', 'order': 2}, {'id': 3, 'code': 'affection_style', 'text': '애정 표현은 어떤 방식이 편한가요?', 'order': 3}, {'id': 4, 'code': 'contact_frequency', 'text': '연인과의 연락 빈도는 어느 정도가 좋다고 생각하나요?', 'order': 4}, {'id': 5, 'code': 'ideal_relationship', 'text': '내가 바라는 이상적인 연애는 어떤 모습인가요?', 'order': 5}, {'id': 6, 'code': 'mood_when_down', 'text': '기분이 안 좋을 때 나는 어떻게 행동하나요?', 'order': 6}, {'id': 7, 'code': 'expressing_emotions', 'text': '연인에게 감정을 표현할 때 어떤 방식이 편한가요?', 'order': 7}, {'id': 8, 'code': 'when_resentful', 'text': '서운하거나 불편한 일이 생기면 어떻게 하나요?', 'order': 8}  ... displaying 10 of 17 total bound parameter sets ...  {'id': 16, 'code': 'love_vs_life', 'text': '연애와 개인의 삶 중 우선순위는?', 'order': 16}, {'id': 17, 'code': 'different_values_response', 'text': '연애 중, 상대방이 나와 다른 가치관을 가졌을 때 나는?', 'order': 17}]
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] INSERT INTO survey_choices (id, question_id, text, tag) VALUES (%(id)s, %(question_id)s, %(text)s, %(tag)s)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00022s] [{'id': 1, 'question_id': 1, 'text': '신뢰와 믿음', 'tag': 'trust'}, {'id': 2, 'question_id': 1, 'text': '대화와 소통', 'tag': 'communication'}, {'id': 3, 'question_id': 1, 'text': '각자의 자유와 독립성', 'tag': 'independence'}, {'id': 4, 'question_id': 1, 'text': '애정 표현과 스킨십', 'tag': 'affection'}, {'id': 5, 'question_id': 1, 'text': '유머와 함께하는 즐거움', 'tag': 'humor'}, {'id': 6, 'question_id': 1, 'text': '기타 (직접 입력)', 'tag': 'custom'}, {'id': 7, 'question_id': 2, 'text': '내가 먼저 사과하고 푼다', 'tag': 'apologize_first'}, {'id': 8, 'question_id': 2, 'text': '감정을 정리한 뒤 대화한다', 'tag': 'cool_then_talk'}  ... displaying 10 of 91 total bound parameter sets ...  {'id': 90, 'question_id': 17, 'text': '피곤할 것 같으면 그냥 거리를 둔다', 'tag': 'distances_when_difficult'}, {'id': 91, 'question_id': 17, 'text': '기타 (직접 입력)', 'tag': 'custom'}]
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] INSERT INTO user_survey_responses (user_id, question_id, choice_id, custom_input, submitted_at) VALUES (%(user_id__0)s, %(question_id__0)s, %(choice_id__0)s, %(custom_input__0)s, %(submitted_at__0)s), (%(user_id__1)s, %(question_id__1)s, %(choice_id_ ... 801 characters truncated ... put__9)s, %(submitted_at__9)s) RETURNING user_survey_responses.id, user_survey_responses.id AS id__1
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00005s (insertmanyvalues) 1/1 (ordered)] {'custom_input__0': None, 'submitted_at__0': datetime.datetime(2025, 7, 14, 9, 19, 26, 43676), 'choice_id__0': 2, 'question_id__0': 1, 'user_id__0': '1', 'custom_input__1': None, 'submitted_at__1': datetime.datetime(2025, 7, 14, 9, 19, 26, 43691), 'choice_id__1': 8, 'question_id__1': 2, 'user_id__1': '1', 'custom_input__2': None, 'submitted_at__2': datetime.datetime(2025, 7, 14, 9, 19, 26, 43699), 'choice_id__2': 13, 'question_id__2': 3, 'user_id__2': '1', 'custom_input__3': None, 'submitted_at__3': datetime.datetime(2025, 7, 14, 9, 19, 26, 43706), 'choice_id__3': 21, 'question_id__3': 4, 'user_id__3': '1', 'custom_input__4': None, 'submitted_at__4': datetime.datetime(2025, 7, 14, 9, 19, 26, 43714), 'choice_id__4': 26, 'question_id__4': 5, 'user_id__4': '1', 'custom_input__5': None, 'submitted_at__5': datetime.datetime(2025, 7, 14, 9, 19, 26, 43720), 'choice_id__5': 1, 'question_id__5': 1, 'user_id__5': '2', 'custom_input__6': None, 'submitted_at__6': datetime.datetime(2025, 7, 14, 9, 19, 26, 43726), 'choice_id__6': 9, 'question_id__6': 2, 'user_id__6': '2', 'custom_input__7': None, 'submitted_at__7': datetime.datetime(2025, 7, 14, 9, 19, 26, 43733), 'choice_id__7': 16, 'question_id__7': 3, 'user_id__7': '2', 'custom_input__8': None, 'submitted_at__8': datetime.datetime(2025, 7, 14, 9, 19, 26, 43740), 'choice_id__8': 20, 'question_id__8': 4, 'user_id__8': '2', 'custom_input__9': None, 'submitted_at__9': datetime.datetime(2025, 7, 14, 9, 19, 26, 43748), 'choice_id__9': 25, 'question_id__9': 5, 'user_id__9': '2'}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] INSERT INTO emotion_logs (user_id, emotion, date, memo) VALUES (%(user_id__0)s, %(emotion__0)s, %(date__0)s, %(memo__0)s), (%(user_id__1)s, %(emotion__1)s, %(date__1)s, %(memo__1)s), (%(user_id__2)s, %(emotion__2)s, %(date__2)s, %(memo__2)s), (%(user ... 1451 characters truncated ... )s, %(emotion__26)s, %(date__26)s, %(memo__26)s) RETURNING emotion_logs.id, emotion_logs.id AS id__1
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s (insertmanyvalues) 1/1 (ordered)] {'memo__0': '작은 배려 하나에도 고마운 마음이 들었어.', 'date__0': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__0': '1', 'emotion__0': '고마움', 'memo__1': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__1': datetime.datetime(2025, 7, 1, 0, 0), 'user_id__1': '1', 'emotion__1': '기대감', 'memo__2': '너에게 미안한 마음이 계속 남았어.', 'date__2': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__2': '1', 'emotion__2': '미안함', 'memo__3': '약속 못 지켜서 마음이 무거웠어.', 'date__3': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__3': '1', 'emotion__3': '죄책감', 'memo__4': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__4': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__4': '1', 'emotion__4': '사랑', 'memo__5': '네게 더 따뜻하게 대해주고 싶었어.', 'date__5': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__5': '1', 'emotion__5': '다정함', 'memo__6': '너와의 대화가 편하고 좋았어.', 'date__6': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__6': '1', 'emotion__6': '친밀감', 'memo__7': '내 마음을 네가 몰라준 것 같아 속상했어.', 'date__7': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__7': '1', 'emotion__7': '억울함', 'memo__8': '너의 반응이 조금 서운했어.', 'date__8': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__8': '1', 'emotion__8': '서운함', 'memo__9': '너랑 함께한 시간이 정말 행복했어.', 'date__9': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__9': '1', 'emotion__9': '행복', 'memo__10': '네가 있어줘서 고마운 하루였어.', 'date__10': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__10': '1', 'emotion__10': '감사', 'memo__11': '우리는 서로 믿고 있다는 확신이 생겼어.', 'date__11': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__11': '1', 'emotion__11': '신뢰', 'memo__12': '너에 대한 애정이 넘쳤어.', 'date__12': datetime.datetime(2025, 7, 7, 0, 0) ... 8 parameters truncated ... 'user_id__14': '2', 'emotion__14': '바쁨', 'memo__15': '너의 반응이 조금 서운했어.', 'date__15': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__15': '2', 'emotion__15': '서운함', 'memo__16': '기대했던 만큼 반응이 없어서 실망했어.', 'date__16': datetime.datetime(2025, 7, 2, 0, 0), 'user_id__16': '2', 'emotion__16': '실망감', 'memo__17': '네 입장에서 생각해보게 됐어.', 'date__17': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__17': '2', 'emotion__17': '이해', 'memo__18': '네게 더 따뜻하게 대해주고 싶었어.', 'date__18': datetime.datetime(2025, 7, 3, 0, 0), 'user_id__18': '2', 'emotion__18': '다정함', 'memo__19': '너의 말투나 행동이 참 좋았어.', 'date__19': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__19': '2', 'emotion__19': '호감', 'memo__20': '너와 있으면 참 편안해.', 'date__20': datetime.datetime(2025, 7, 4, 0, 0), 'user_id__20': '2', 'emotion__20': '편안함', 'memo__21': '오늘은 너랑 보내는 시간이 기대됐어.', 'date__21': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__21': '2', 'emotion__21': '기대감', 'memo__22': '조금만 더 신경 써줬으면 좋겠다는 생각이 들었어.', 'date__22': datetime.datetime(2025, 7, 5, 0, 0), 'user_id__22': '2', 'emotion__22': '불만', 'memo__23': '네가 챙겨주는 모습에 기뻤어.', 'date__23': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__23': '2', 'emotion__23': '기쁨', 'memo__24': '사소한 행동에도 감동했어.', 'date__24': datetime.datetime(2025, 7, 6, 0, 0), 'user_id__24': '2', 'emotion__24': '감동', 'memo__25': '너에 대한 사랑이 더 깊어진 하루였어.', 'date__25': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__25': '2', 'emotion__25': '사랑', 'memo__26': '네가 있다는 사실만으로도 마음이 놓였어.', 'date__26': datetime.datetime(2025, 7, 7, 0, 0), 'user_id__26': '2', 'emotion__26': '안정감'}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] INSERT INTO messages (user_id, couple_id, content, image_url, has_image, created_at, deleted_at, is_delivered, embed_index) VALUES (%(user_id__0)s, %(couple_id__0)s, %(content__0)s, %(image_url__0)s, %(has_image__0)s, %(created_at__0)s, %(deleted_at_ ... 5028 characters truncated ... (is_delivered__29)s, %(embed_index__29)s) RETURNING messages.chat_id, messages.chat_id AS chat_id__1
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00012s (insertmanyvalues) 1/1 (ordered)] {'is_delivered__0': 1, 'deleted_at__0': None, 'created_at__0': datetime.datetime(2025, 7, 1, 17, 0), 'content__0': '잘 잤어? 오늘도 힘내자! 😊', 'has_image__0': 0, 'embed_index__0': None, 'couple_id__0': '1', 'user_id__0': '1', 'image_url__0': None, 'is_delivered__1': 1, 'deleted_at__1': None, 'created_at__1': datetime.datetime(2025, 7, 1, 17, 40), 'content__1': '응 고마워~ 오늘 일정 좀 많아서 바쁠 듯해.', 'has_image__1': 0, 'embed_index__1': None, 'couple_id__1': '1', 'user_id__1': '2', 'image_url__1': None, 'is_delivered__2': 1, 'deleted_at__2': None, 'created_at__2': datetime.datetime(2025, 7, 1, 18, 20), 'content__2': '나도 회의 두 개 있어서 정신 없을 듯… 이따 끝나고 연락하자~', 'has_image__2': 0, 'embed_index__2': None, 'couple_id__2': '1', 'user_id__2': '1', 'image_url__2': None, 'is_delivered__3': 1, 'deleted_at__3': None, 'created_at__3': datetime.datetime(2025, 7, 1, 19, 0), 'content__3': '좋아! 우리 저녁엔 통화하자 :)', 'has_image__3': 0, 'embed_index__3': None, 'couple_id__3': '1', 'user_id__3': '2', 'image_url__3': None, 'is_delivered__4': 1, 'deleted_at__4': None, 'created_at__4': datetime.datetime(2025, 7, 2, 17, 0), 'content__4': '어제 약속했는데 통화 못했네 😕', 'has_image__4': 0, 'embed_index__4': None, 'couple_id__4': '1', 'user_id__4': '2', 'image_url__4': None, 'is_delivered__5': 1, 'deleted_at__5': None, 'created_at__5': datetime.datetime(2025, 7, 2, 17, 40), 'content__5': '미안… 회의 끝나고 뻗어버렸어 ㅠ', 'has_image__5': 0 ... 170 parameters truncated ... 'has_image__24': 0, 'embed_index__24': None, 'couple_id__24': '1', 'user_id__24': '1', 'image_url__24': None, 'is_delivered__25': 1, 'deleted_at__25': None, 'created_at__25': datetime.datetime(2025, 7, 6, 19, 0), 'content__25': '나도야~ 🥰', 'has_image__25': 0, 'embed_index__25': None, 'couple_id__25': '1', 'user_id__25': '2', 'image_url__25': None, 'is_delivered__26': 1, 'deleted_at__26': None, 'created_at__26': datetime.datetime(2025, 7, 7, 17, 0), 'content__26': '일주일 진짜 빠르다', 'has_image__26': 0, 'embed_index__26': None, 'couple_id__26': '1', 'user_id__26': '1', 'image_url__26': None, 'is_delivered__27': 1, 'deleted_at__27': None, 'created_at__27': datetime.datetime(2025, 7, 7, 17, 40), 'content__27': '그러게~ 우리 이번 주도 잘 버텼다', 'has_image__27': 0, 'embed_index__27': None, 'couple_id__27': '1', 'user_id__27': '2', 'image_url__27': None, 'is_delivered__28': 1, 'deleted_at__28': None, 'created_at__28': datetime.datetime(2025, 7, 7, 18, 20), 'content__28': '너 있어서 든든했어', 'has_image__28': 0, 'embed_index__28': None, 'couple_id__28': '1', 'user_id__28': '1', 'image_url__28': None, 'is_delivered__29': 1, 'deleted_at__29': None, 'created_at__29': datetime.datetime(2025, 7, 7, 19, 0), 'content__29': '다음 주도 잘 지내보자! 사랑해 😘', 'has_image__29': 0, 'embed_index__29': None, 'couple_id__29': '1', 'user_id__29': '2', 'image_url__29': None}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id 
FROM users
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00006s] {}
[2025-07-14 18:19:27][INFO][jobs.analysis_personality] [성향 요약] 2명 대상 분석 시작
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00007s] {'user_id_1': '1'}
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:27][INFO][sqlalchemy.engine.Engine] [generated in 0.00010s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:19:31][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] [generated in 0.00030s] {'user_id_1': '1', 'param_1': 1}
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] [generated in 0.00028s] {'user_id': '1', 'summary': '지민 highly values communication in relationships, prioritizing open and honest dialogue. When conflicts arise, they prefer to remain calm initially an ... (249 characters truncated) ... their partner regularly. Ultimately, they seek a deep, meaningful connection that combines these elements to build a strong and lasting relationship.', 'created_at': datetime.datetime(2025, 7, 14, 9, 19, 31, 709315), 'updated_at': datetime.datetime(2025, 7, 14, 9, 19, 31, 709322)}
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:31][INFO][jobs.analysis_personality] [성향 요약] 사용자 1 요약 저장 완료
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] BEGIN (implicit)
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] SELECT survey_questions.code AS survey_questions_code, survey_questions.text AS question_text, survey_choices.text AS choice_text, survey_choices.tag AS survey_choices_tag, user_survey_responses.custom_input AS user_survey_responses_custom_input 
FROM survey_questions INNER JOIN user_survey_responses ON survey_questions.id = user_survey_responses.question_id LEFT OUTER JOIN survey_choices ON survey_choices.id = user_survey_responses.choice_id 
WHERE user_survey_responses.user_id = %(user_id_1)s
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] [cached since 4.068s ago] {'user_id_1': '2'}
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] SELECT users.user_id AS users_user_id, users.name AS users_name, users.email AS users_email, users.created_at AS users_created_at, users.deleted_at AS users_deleted_at, users.modified_at AS users_modified_at, users.birth AS users_birth, users.gender AS users_gender 
FROM users 
WHERE users.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:31][INFO][sqlalchemy.engine.Engine] [cached since 4.067s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:19:33][INFO][httpx] HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[2025-07-14 18:19:33][INFO][sqlalchemy.engine.Engine] SELECT user_trait_summaries.id AS user_trait_summaries_id, user_trait_summaries.user_id AS user_trait_summaries_user_id, user_trait_summaries.summary AS user_trait_summaries_summary, user_trait_summaries.created_at AS user_trait_summaries_created_at, user_trait_summaries.updated_at AS user_trait_summaries_updated_at 
FROM user_trait_summaries 
WHERE user_trait_summaries.user_id = %(user_id_1)s 
 LIMIT %(param_1)s
[2025-07-14 18:19:33][INFO][sqlalchemy.engine.Engine] [cached since 2.268s ago] {'user_id_1': '2', 'param_1': 1}
[2025-07-14 18:19:33][INFO][sqlalchemy.engine.Engine] INSERT INTO user_trait_summaries (user_id, summary, created_at, updated_at) VALUES (%(user_id)s, %(summary)s, %(created_at)s, %(updated_at)s)
[2025-07-14 18:19:33][INFO][sqlalchemy.engine.Engine] [cached since 2.268s ago] {'user_id': '2', 'summary': '수아 values trust as the foundation of their relationships, seeking partners who are reliable and honest. In times of conflict, they prefer a strategy  ... (280 characters truncated) ... being overwhelming. Ultimately, they strive for a relationship that balances closeness with independence, ensuring personal space and mutual respect.', 'created_at': datetime.datetime(2025, 7, 14, 9, 19, 33, 976774), 'updated_at': datetime.datetime(2025, 7, 14, 9, 19, 33, 976782)}
[2025-07-14 18:19:33][INFO][sqlalchemy.engine.Engine] COMMIT
[2025-07-14 18:19:34][INFO][jobs.analysis_personality] [성향 요약] 사용자 2 요약 저장 완료
[2025-07-14 18:19:34][INFO][jobs.analysis_personality] [성향 요약] 전체 완료
[2025-07-14 18:19:34][INFO][root] 유저 성향 분석/요약 완료
