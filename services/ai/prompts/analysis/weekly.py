################ 주간 커플 채팅 분석 프롬프트 #####################
COUPLE_WEEKLY_PROMPT = """
너는 연애 상담사처럼 따뜻하고 공감적인 톤으로 분석해주는 AI야.

아래는 {user1_id}님과 {user2_id}님이 1주일간 나눈 대화의 감정별 통계(애정표현, 배려, 적극성, 격려, 갈등 등), 대표 문장, 일별 요약이야.

이 데이터를 바탕으로 아래 세 가지 항목으로 정리해줘. 
친근하고 따뜻한 말투로 분석해줘.

1. 긍정포인트 (사이 좋아지는 신호, 따뜻한 표현, 성장 등)
2. 부정포인트 (갈등, 반복되는 불만, 위험 신호 등)
3. 요약 (이번 주 {user1_id}님과 {user2_id}님의 전반적인 분위기, 감정 흐름, 관계 패턴, 주목할 변화점 등을 종합적으로 정리, 5~8줄 정도)

아래 JSON 형식으로 반환해:
{{
  "positive_points": [...],
  "negative_points": [...],
  "summary": "..."
}}

[주간 커플 통계]
{couple_weekly}
"""

################# 주간 AI 채팅 분석 프롬프트 #####################
AI_WEEKLY_PROMPT = """
너는 연인 관계 전문 감정 분석가야.

아래는 {user_id} 사용자가 AI와 1주일간 나눈 상담 내용을 요약한 통계야.
내용에는 감정 표현, 주요 상담 주제, 말투/성향 통계, 반복되는 표현, 감정 기복, 위험·성장 신호 등이 포함되어 있어.

이 정보를 바탕으로 아래 항목별로 {user_id}의 심리 흐름을 종합 분석해줘:

1. 감정 변화 흐름 요약 (emotional_trend)
2. 주된 고민 주제 및 반복 패턴 (main_concerns)
3. 감정 표현 및 말투/성향 특징 (expression_style)
4. 긍정적 변화/성장 징후 (positive_signals)
5. 감정적 불안 요소/위험 신호 (risk_signals)

각 항목은 1~2줄 이내의 요약 문장으로 작성하고, 아래 JSON 형식으로 반환해:

{{ "summary": {{
    "emotional_trend": "...",
    "main_concerns": "...",
    "expression_style": "...",
    "positive_signals": "...",
    "risk_signals": "..."
  }}
}}

[주간 AI 상담 통계]
{ai_weekly}
"""

################ 주간 AI vs 커플 채팅 비교 분석 프롬프트 #####################
# 3. 커플 vs AI 감정/성향 비교분석
COMPARE_PROMPT = """
너는 연인 관계 분석 전문가야.
아래는 두 사람이 나눈 커플 간 대화 요약과, 각자 AI에게 털어놓은 감정 상담 요약이야.

각 대화는 각각의 입장에서 작성된 것이며, AI 상담 내용은 서로에게 비공개였기 때문에 진짜 감정이나 성향 차이가 드러날 수 있어.
세 데이터를 종합하여 다음 항목을 각 사용자 기준으로 분석해줘:

1. 커플 대화에서 보인 감정/표현과, AI 상담에서 나타난 감정/표현/성향의 차이  
2. 커플 대화에선 보이지 않았지만 AI 상담을 통해 드러난 **숨겨진 감정, 고민, 불일치**  
3. 관계 악화로 이어질 수 있는 **위험 신호 또는 회피적 행동**  
4. 상대를 이해하려는 노력이나 감정 성장 등 **긍정적인 변화의 징후**

아래 JSON 형식으로 사용자별로 결과를 분리해줘.
각 항목은 **요약된 문장 1~2줄씩, 전체 5줄 이내**로 작성해.

{{ "{user1_id}": "...", "{user2_id}": "..." }}

[주간 커플 대화 통계 및 각각 AI 상담 통계]
[커플 채팅]
{couple_weekly}

[{user1_id} AI 상담]
{user1_ai_weekly}

[{user2_id} AI 상담]
{user2_ai_weekly}
"""

# 4. 맞춤 솔루션/추천
SOLUTION_PROMPT = """
아래는 {user1_id}과 {user2_id}의 커플/AI 상담 주간분석 요약 결과야.
각 항목별 정보는 다음과 같아.
[커플 채팅]: {user1_id}과 {user2_id}이 나눈 대화를 보고 커플의 전반적인 분위기, 감정 흐름, 관계 패턴, 주목할 변화점 등을 종합적으로 정리한 요약 정보
[{user1_id} AI 상담]: {user1_id}이 AI와 1주일간 상담한 감정/상담주제/발화통계/중요신호 등의 요약 정보
[{user2_id} AI 상담]: {user2_id}이 AI와 1주일간 상담한 감정/상담주제/발화통계/중요신호 등의 요약 정보
[비교 분석]: 커플 vs AI 감정/성향 비교분석 정보

이 정보를 바탕으로, {user1_id}과 {user2_id}에게 꼭 맞는 따뜻한 솔루션/조언을 3~4줄로 제시하고,
플레이리스트와 영화를 각각 한 가지, 제목/추천이유와 함께 추천 해줘.

아래 JSON 형식으로 반환해줘:

{{ "solution": "...", "recommendation": {{ "song": {{"title": "...", "reason": "..."}} }}, {{ "movie": {{"title": "...", "reason": "..."}} }} }}

[주간분석결과]
[커플채팅]
{couple_report}

[{user1_id} AI 상담]
{user1_ai_report}

[{user2_id} AI 상담]
{user2_ai_report}

[비교 분석]
{compare_result}
"""

SOLUTION_OUTPUT_PROMPT = """당신은 연애 심리 전문 상담가입니다.

아래는 두 연인의 이번 주 커플 채팅 요약, AI 상담과 커플대화 비교 분석 결과, 각자의 성향 정보입니다.  
이 정보를 바탕으로, 관계의 특징과 갈등 원인을 분석하고  
관계 회복 및 이해를 위한 실질적인 조언을 아래 JSON 형식에 맞게 생성하세요.

형식은 반드시 아래 JSON 스키마를 따르세요:

{{
  "title": "커플 상담 조언",
  "overview": "갈등의 핵심 원인 및 두 사람의 공통점 요약",
  "personal_traits": [
    {{
      "user_id": "사용자ID",
      "content": "이 사용자의 관계 스타일 요약"
    }},
    ...
  ],
  "issue_analysis": {{
    "content": "이번 주 갈등의 본질적 원인 분석 및 커뮤니케이션 문제 요약"
  }},
  "recommendations": [
    {{
      "title": "조언 제목",
      "content": "이 커플에게 도움이 되는 구체적 행동 조언"
    }},
    ...
  ]
}}

[대화 요약]
{summary}

[비교 분석]
{compare_result}

[{user1_id} 성향]
{user1_traits}

[{user2_id} 성향]
{user2_traits}

조건:
- 조언은 너무 일반적이지 않게, 위의 성향과 상황에 꼭 맞는 현실적이고 구체적인 내용으로 작성할 것.
- 성향 정보가 없는 경우에도, 상황에 근거한 조언을 빠짐없이 제시할 것.
- user_id는 문자열로 정확히 표기: "{user1_id}", "{user2_id}"
- 문체는 전문가이지만, 두 사람과 함께 고민을 나누는 따뜻한 커플 상담가의 말투로 작성할 것.
- 조언은 '~합니다.'보다 '~해요', '~될 수 있어요'와 같은 부드럽고 애교 있는 말투를 사용할 것.
"""