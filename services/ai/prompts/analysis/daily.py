################ 커플 채팅 일간 분석 프롬프트 #####################
DAILY_NLU_PROMPT = """
너는 커플의 하루 대화를 읽고, 각 항목별로 user_id를 기준으로 통계를 나눠줘.
user_id 포맷은 반드시 일관되게 유지하고, 숫자('1','2')와 문자열('user_1','user_2') 등이 섞이지 않도록 주의해.

1) 애정표현
2) 배려/공감
3) 적극적 행동
4) 격려/응원
5) 갈등/서운함/다툼/부정적 감정

각 항목별로 실제 예시 문장(3개 이하 샘플)도 함께 추출해줘.
그리고 마지막엔 그날 하루 전체 요약을 5줄 이내로 써줘.

아래 JSON 형식처럼 반환해줘:

{{
  "user_stats": {{
    {{user_id or user_name}}: {{
      "애정표현_횟수": 2,
      "애정표현_샘플": ["사랑해", "보고 싶었어"],
      "배려_횟수": 2,
      "배려_샘플": ["오늘 힘들지 않았어?", "몸 조심해!"],
      "적극_횟수": 1,
      "적극_샘플": ["내가 먼저 연락할게!"],
      "격려_횟수": 2,
      "격려_샘플": ["힘내!", "잘할 수 있어!"],
      "갈등_횟수": 2,
      "갈등_샘플": ["왜 또 그런 말을 해?", "오늘 좀 서운했어"],
    }},
    {{user_id or user_name}}: {{
      "애정표현_횟수": 1,
      "애정표현_샘플": ["너밖에 없어"],
      "배려_횟수": 1,
      "배려_샘플": ["아침 잘 챙겨먹어"],
      "적극_횟수": 5,
      "적극_샘플": ["데이트 하러 가자", "영화 볼래?", "맛집 예약해뒀어"],
      "격려_횟수": 2,
      "격려_샘플": ["잘될거야", "걱정마"],
      "갈등_횟수": 2,
      "갈등_샘플": ["그거 하지 말랬지", "연락하지마"],
    }}
  }},
  "요약": "user_1이 주로 감정 표현을 주도했고, user_2는 행동면에서 적극적인 모습을 보였다. ..."
}}

[하루 대화: user_id 포함 메시지]
{messages}
"""

################ AI 채팅 일간 분석 프롬프트 #####################
DAILY_AI_NLU_PROMPT = """
너는 연애·심리 상담 AI 분석가야.

아래는 한 사용자가 하루 동안 AI(챗봇)과 나눈 비공개 상담/대화 기록이야.  
이 대화를 바탕으로 아래 항목을 각각 분석해서 JSON 형태로 답변해줘.

1) 오늘 사용자가 AI에게 표현한 대표 감정 (최대 2가지, 예: 불안/행복/분노/권태/외로움/희망 등)
2) 주로 상담한 주제/고민(최대 2가지, 예: 권태, 다툼, 화해, 자기성장, 이별 고민 등)
3) 긍정적 발화(용기, 성장, 회복 등) 횟수와 대표 문장(최대 3개)
4) 부정적/불안/갈등 관련 발화 횟수와 대표 문장(최대 3개)
5) AI와의 대화에서 드러난 중요한 변화/심리 신호/위험 요인(있다면, 2~3문장)
6) 마지막으로 오늘 하루 AI와의 상담 전체 요약을 5~8줄로 작성

아래 JSON 형식처럼 반환해줘:

{{
  "대표감정": ["불안", "외로움"],
  "상담주제": ["권태", "자존감"],
  "긍정발화_횟수": 2,
  "긍정발화_샘플": ["다시 한 번 노력해볼게요.", "요즘은 내 마음을 더 솔직히 말하려고 해요."],
  "부정발화_횟수": 3,
  "부정발화_샘플": ["사실 요즘 너무 지쳤어요.", "더 이상 어떻게 해야 할지 모르겠어."],
  "중요신호": "최근 고민의 강도가 높아지고 있으며, 상대방과의 소통이 줄었다고 반복적으로 언급함.",
  "요약": "오늘은 주로 권태와 자기감정에 대해 상담했고, 힘들지만 스스로 변화하려는 의지도 보였다. ..."
}}

[AI 상담 대화]
{messages}
"""

################ 커플 채팅과 감정 기록 비교 분석 프롬프트 #####################
DAILY_COMPARISON_PROMPT = """
너는 커플의 하루 채팅과 감정 기록을 비교하여 종합적인 인사이트를 제공하는 분석가야.
user_id 기준으로 분석해줘.
user_id 포맷은 반드시 일관되게 유지하고, 숫자('1','2')와 문자열('user_1','user_2') 등이 섞이지 않도록 주의해.

채팅 분석과 감정 분석 결과를 바탕으로 아래 항목들을 분석해줘:

1) 채팅과 감정의 일치도 (채팅에서 보인 감정과 기록된 감정이 일치하는지)
2) 소통 패턴과 감정의 연관성
3) 잠재적 문제점이나 긍정적 신호
4) 개선 제안사항

아래 JSON 형식처럼 반환해줘:

{{
  "일치도_분석": {{
    {{user_id or user_name}}: {{
      "일치도": "100%",
      "설명": "채팅에서 보인 애정 표현과 기록된 행복한 감정이 일치함"
    }},
    {{user_id or user_name}}: {{
      "일치도": "75%",
      "설명": "적극적인 행동과 기대감이 어느 정도 일치하지만, 더 깊은 감정 표현이 부족함"
    }}
  }},
  "소통_패턴_분석": {{
    "긍정적_신호": ["서로에 대한 관심과 배려가 감정과 행동에서 일치함"],
    "개선_점": ["user_2의 감정 표현을 더 구체적으로 나누면 좋겠음"]
  }},
  "종합_평가": {{
    "전체_상태": "건강함",
    "주요_특징": "서로에 대한 애정과 기대감이 채팅과 감정에서 모두 드러남",
    "권장사항": "현재 상태를 유지하면서 더 깊은 감정 공유를 시도해보기"
  }},
  "요약": "오늘은 두 사람 모두 긍정적인 감정을 기록했고, 채팅에서도 서로에 대한 관심과 애정이 잘 드러났다. 전반적으로 건강한 커뮤니케이션을 보이고 있다."
}}

[채팅]
{messages}

[감정 기록]
{emotions}
"""